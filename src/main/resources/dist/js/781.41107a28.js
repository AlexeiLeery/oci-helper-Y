"use strict";(self["webpackChunkoci_help_web"]=self["webpackChunkoci_help_web"]||[]).push([[781],{1781:function(e,a,l){l.r(a),l.d(a,{default:function(){return C}});var t=l(6768);const s={class:"tab-content"},d={key:0},n={key:1};function o(e,a,l,o,i,r){const u=(0,t.g2)("Setting"),c=(0,t.g2)("el-icon"),g=(0,t.g2)("el-tab-pane"),p=(0,t.g2)("DocumentCopy"),m=(0,t.g2)("BasicCfg"),f=(0,t.g2)("BackUp"),b=(0,t.g2)("el-tabs");return(0,t.uX)(),(0,t.Wv)(b,{type:"border-card",class:"demo-tabs",modelValue:i.activeTab,"onUpdate:modelValue":a[0]||(a[0]=e=>i.activeTab=e)},{default:(0,t.k6)((()=>[(0,t.bF)(g,{label:"basicCfg",name:"basicCfg"},{label:(0,t.k6)((()=>[(0,t.Lk)("span",null,[(0,t.bF)(c,null,{default:(0,t.k6)((()=>[(0,t.bF)(u)])),_:1}),a[1]||(a[1]=(0,t.Lk)("span",{style:{"margin-left":"5px"}},"基本设置",-1))])])),_:1}),(0,t.bF)(g,{label:"backup",name:"backup"},{label:(0,t.k6)((()=>[(0,t.Lk)("span",null,[(0,t.bF)(c,null,{default:(0,t.k6)((()=>[(0,t.bF)(p)])),_:1}),a[2]||(a[2]=(0,t.Lk)("span",{style:{"margin-left":"5px"}},"备份恢复",-1))])])),_:1}),(0,t.Lk)("div",s,["basicCfg"===i.activeTab?((0,t.uX)(),(0,t.CE)("div",d,[(0,t.bF)(m)])):(0,t.Q3)("",!0),"backup"===i.activeTab?((0,t.uX)(),(0,t.CE)("div",n,[(0,t.bF)(f)])):(0,t.Q3)("",!0)])])),_:1},8,["modelValue"])}const i={key:0,class:"image-preview"};function r(e,a,l,s,d,n){const o=(0,t.g2)("el-text"),r=(0,t.g2)("el-input"),u=(0,t.g2)("el-form-item"),c=(0,t.g2)("el-form"),g=(0,t.g2)("el-divider"),p=(0,t.g2)("el-switch"),m=(0,t.g2)("el-image"),f=(0,t.g2)("el-button"),b=(0,t.g2)("el-aside"),k=(0,t.g2)("el-main"),y=(0,t.g2)("el-container");return(0,t.uX)(),(0,t.Wv)(y,{style:{height:"100vh"}},{default:(0,t.k6)((()=>[(0,t.bF)(b,{width:"700px",class:"left-panel"},{default:(0,t.k6)((()=>[(0,t.bF)(c,null,{default:(0,t.k6)((()=>[(0,t.bF)(o,{class:"mx-1",size:"large"},{default:(0,t.k6)((()=>a[7]||(a[7]=[(0,t.eW)("telegram机器人Token")]))),_:1}),(0,t.bF)(u,{style:{"margin-top":"10px"}},{default:(0,t.k6)((()=>[(0,t.bF)(r,{modelValue:d.UpdateSysCfgParams.tgBotToken,"onUpdate:modelValue":a[0]||(a[0]=e=>d.UpdateSysCfgParams.tgBotToken=e),placeholder:"12345678:AAGC8NFfxxxx",clearable:""},null,8,["modelValue"])])),_:1}),(0,t.bF)(o,{class:"mx-1",size:"large"},{default:(0,t.k6)((()=>a[8]||(a[8]=[(0,t.eW)("telegram个人ID")]))),_:1}),(0,t.bF)(u,{style:{"margin-top":"10px"}},{default:(0,t.k6)((()=>[(0,t.bF)(r,{modelValue:d.UpdateSysCfgParams.tgChatId,"onUpdate:modelValue":a[1]||(a[1]=e=>d.UpdateSysCfgParams.tgChatId=e),placeholder:"61945xxxxx",clearable:""},null,8,["modelValue"])])),_:1}),(0,t.bF)(o,{class:"mx-1",size:"large"},{default:(0,t.k6)((()=>a[9]||(a[9]=[(0,t.eW)("钉钉access_token")]))),_:1}),(0,t.bF)(u,{style:{"margin-top":"10px"}},{default:(0,t.k6)((()=>[(0,t.bF)(r,{modelValue:d.UpdateSysCfgParams.dingToken,"onUpdate:modelValue":a[2]||(a[2]=e=>d.UpdateSysCfgParams.dingToken=e),placeholder:"0b0bf9f89xxxx",clearable:""},null,8,["modelValue"])])),_:1}),(0,t.bF)(o,{class:"mx-1",size:"large"},{default:(0,t.k6)((()=>a[10]||(a[10]=[(0,t.eW)("钉钉secret")]))),_:1}),(0,t.bF)(u,{style:{"margin-top":"10px"}},{default:(0,t.k6)((()=>[(0,t.bF)(r,{modelValue:d.UpdateSysCfgParams.dingSecret,"onUpdate:modelValue":a[3]||(a[3]=e=>d.UpdateSysCfgParams.dingSecret=e),placeholder:"SEC1ebxxxx",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),(0,t.bF)(g,{class:"divider"}),(0,t.bF)(c,null,{default:(0,t.k6)((()=>[(0,t.bF)(u,{label:"是否启用MFA（推荐谷歌）：",style:{"margin-top":"10px"}},{default:(0,t.k6)((()=>[(0,t.bF)(p,{modelValue:d.UpdateSysCfgParams.enableMfa,"onUpdate:modelValue":a[4]||(a[4]=e=>d.UpdateSysCfgParams.enableMfa=e),"active-text":"启用","inactive-text":"禁用"},null,8,["modelValue"])])),_:1}),(0,t.bF)(o,{class:"mx-1"},{default:(0,t.k6)((()=>a[11]||(a[11]=[(0,t.eW)("⭐PS：如果禁用后重新启用，需要在APP上删除旧的验证码，重新扫码绑定新的MFA验证码❗❗❗")]))),_:1}),d.UpdateSysCfgParams.enableMfa?((0,t.uX)(),(0,t.CE)("div",i,[(0,t.bF)(m,{style:{"margin-top":"20px",width:"300px",height:"300px"},src:d.UpdateSysCfgParams.mfaQrData,fit:"contain"},null,8,["src"]),(0,t.bF)(r,{modelValue:d.UpdateSysCfgParams.mfaSecret,"onUpdate:modelValue":a[5]||(a[5]=e=>d.UpdateSysCfgParams.mfaSecret=e),style:{"margin-top":"10px",width:"400px"},disabled:"",placeholder:"",label:""},null,8,["modelValue"])])):(0,t.Q3)("",!0)])),_:1}),(0,t.bF)(f,{type:"primary",style:{"margin-top":"10px"},onClick:n.updateSysCfg,loading:d.cfgLoading},{default:(0,t.k6)((()=>a[12]||(a[12]=[(0,t.eW)(" 更新配置 ")]))),_:1},8,["onClick","loading"])])),_:1}),(0,t.bF)(k,{class:"right-panel"},{default:(0,t.k6)((()=>[(0,t.bF)(r,{type:"textarea",modelValue:d.message,"onUpdate:modelValue":a[6]||(a[6]=e=>d.message=e),placeholder:"输入测试文本",rows:20},null,8,["modelValue"]),(0,t.bF)(f,{type:"primary",onClick:n.sendMsg,loading:d.sendLoading},{default:(0,t.k6)((()=>a[13]||(a[13]=[(0,t.eW)("测试消息发送")]))),_:1},8,["onClick","loading"])])),_:1})])),_:1})}var u=l(1219),c={data(){return{cfgLoading:!1,sendLoading:!1,UpdateSysCfgParams:{dingToken:"",dingSecret:"",tgChatId:"",tgBotToken:"",enableMfa:"",mfaSecret:"",mfaQrData:""},message:""}},mounted(){this.getSysCfg()},methods:{async getSysCfg(){await this.$axios.post("/sys/getSysCfg",{}).then((e=>{e.data.success?this.UpdateSysCfgParams=e.data.data:(0,u.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)}))},async updateSysCfg(){this.cfgLoading=!0,await this.$axios.post("/sys/updateSysCfg",{...this.UpdateSysCfgParams}).then((e=>{e.data.success?((0,u.nk)({message:e.data.msg,type:"success",duration:2e3}),this.cfgLoading=!1,this.getSysCfg()):(0,u.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)}))},async sendMsg(){this.sendLoading=!0,await this.$axios.post("/sys/sendMsg",{message:this.message}).then((e=>{e.data.success?((0,u.nk)({message:e.data.msg,type:"success",duration:2e3}),this.sendLoading=!1):(0,u.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)}))}}},g=l(1241);const p=(0,g.A)(c,[["render",r],["__scopeId","data-v-d0720154"]]);var m=p;function f(e,a,l,s,d,n){const o=(0,t.g2)("el-switch"),i=(0,t.g2)("el-form-item"),r=(0,t.g2)("el-button"),u=(0,t.g2)("el-divider"),c=(0,t.g2)("el-text"),g=(0,t.g2)("upload-filled"),p=(0,t.g2)("el-icon"),m=(0,t.g2)("el-upload"),f=(0,t.g2)("el-input"),b=(0,t.g2)("el-form");return(0,t.uX)(),(0,t.CE)("div",null,[(0,t.bF)(b,null,{default:(0,t.k6)((()=>[(0,t.bF)(i,{label:"是否启用加密"},{default:(0,t.k6)((()=>[(0,t.bF)(o,{modelValue:d.isEncrypted,"onUpdate:modelValue":a[0]||(a[0]=e=>d.isEncrypted=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(r,{type:"primary",onClick:n.handleBackup,style:{width:"400px"}},{default:(0,t.k6)((()=>a[2]||(a[2]=[(0,t.eW)("备份并下载")]))),_:1},8,["onClick"])])),_:1}),(0,t.bF)(u,{class:"divider"}),(0,t.bF)(c,{class:"mx-1"},{default:(0,t.k6)((()=>a[3]||(a[3]=[(0,t.eW)("上传备份文件")]))),_:1}),(0,t.bF)(i,{label:"",style:{"margin-top":"10px"}},{default:(0,t.k6)((()=>[(0,t.bF)(m,{class:"upload-demo",drag:"","http-request":n.handleFileUpload,multiple:"","show-file-list":!0,"file-list":d.fileList,style:{width:"400px"}},{tip:(0,t.k6)((()=>a[4]||(a[4]=[(0,t.Lk)("div",{class:"el-upload__tip"}," ⭐请上传备份压缩包文件 ",-1)]))),default:(0,t.k6)((()=>[(0,t.bF)(p,{class:"el-icon--upload"},{default:(0,t.k6)((()=>[(0,t.bF)(g)])),_:1}),a[5]||(a[5]=(0,t.Lk)("div",{class:"el-upload__text"},[(0,t.eW)(" Drop file here or "),(0,t.Lk)("em",null,"click to upload")],-1))])),_:1},8,["http-request","file-list"])])),_:1}),(0,t.bF)(i,{label:"密钥"},{default:(0,t.k6)((()=>[(0,t.bF)(f,{modelValue:d.encryptionKey,"onUpdate:modelValue":a[1]||(a[1]=e=>d.encryptionKey=e),placeholder:"输入密钥（可选）",clearable:"",style:{width:"400px"}},null,8,["modelValue"])])),_:1})])),_:1})])}l(4114);var b=l(7477),k={components:{UploadFilled:b.UploadFilled},data(){return{isEncrypted:!1,encryptionKey:"",fileList:[]}},methods:{handleBackup(){console.log("备份中，是否加密：",this.isEncrypted)},handleFileUpload({file:e}){const a=new FileReader;a.onload=a=>{const l=a.target.result;l&&this.fileList.push(e)},a.readAsArrayBuffer(e)}}};const y=(0,g.A)(k,[["render",f],["__scopeId","data-v-2abcc517"]]);var h=y,F={data(){return{activeTab:"basicCfg"}},components:{BasicCfg:m,BackUp:h}};const x=(0,g.A)(F,[["render",o]]);var C=x}}]);
//# sourceMappingURL=781.41107a28.js.map