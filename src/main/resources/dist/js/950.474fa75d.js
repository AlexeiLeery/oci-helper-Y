"use strict";(self["webpackChunkoci_help_web"]=self["webpackChunkoci_help_web"]||[]).push([[950],{1950:function(e,a,t){t.r(a),t.d(a,{default:function(){return G}});var n=t(6768);const i={class:"tab-content"},s={key:0},l={key:1};function o(e,a,t,o,c,d){const r=(0,n.g2)("Cpu"),u=(0,n.g2)("el-icon"),g=(0,n.g2)("el-tab-pane"),p=(0,n.g2)("Box"),m=(0,n.g2)("OciInstanceInfo"),h=(0,n.g2)("BootVolumeList"),f=(0,n.g2)("el-tabs");return(0,n.uX)(),(0,n.Wv)(f,{type:"border-card",class:"demo-tabs",modelValue:c.activeTab,"onUpdate:modelValue":a[0]||(a[0]=e=>c.activeTab=e)},{default:(0,n.k6)((()=>[(0,n.bF)(g,{label:"OciInstanceInfo",name:"OciInstanceInfo"},{label:(0,n.k6)((()=>[(0,n.Lk)("span",null,[(0,n.bF)(u,null,{default:(0,n.k6)((()=>[(0,n.bF)(r)])),_:1}),a[1]||(a[1]=(0,n.Lk)("span",{style:{"margin-left":"5px"}},"实例详情",-1))])])),_:1}),(0,n.bF)(g,{label:"BootVolumeList",name:"BootVolumeList"},{label:(0,n.k6)((()=>[(0,n.Lk)("span",null,[(0,n.bF)(u,null,{default:(0,n.k6)((()=>[(0,n.bF)(p)])),_:1}),a[2]||(a[2]=(0,n.Lk)("span",{style:{"margin-left":"5px"}},"引导卷列表",-1))])])),_:1}),(0,n.Lk)("div",i,["OciInstanceInfo"===c.activeTab?((0,n.uX)(),(0,n.CE)("div",s,[(0,n.bF)(m,{"cfg-id":c.cfgId,username:c.username},null,8,["cfg-id","username"])])):(0,n.Q3)("",!0),"BootVolumeList"===c.activeTab?((0,n.uX)(),(0,n.CE)("div",l,[(0,n.bF)(h,{"cfg-id":c.cfgId,username:c.username},null,8,["cfg-id","username"])])):(0,n.Q3)("",!0)])])),_:1},8,["modelValue"])}var c=t(4232),d=t(5130);const r={style:{"margin-left":"20px"}},u={class:"demo-collapse"},g={style:{"margin-left":"20px"}},p={style:{"margin-left":"20px"}},m={style:{"margin-left":"20px"}},h={style:{"margin-left":"20px"}},f={style:{"margin-left":"20px"}},b={class:"instance-list"},k={class:"header"},I={style:{"line-height":"1"}},y={style:{display:"flex","align-items":"center",margin:"10px"}},C={style:{display:"flex","align-items":"center",margin:"10px"}},L={style:{display:"flex","align-items":"center",margin:"10px"}},_={style:{display:"flex","align-items":"center",margin:"10px"}},v={style:{display:"flex","flex-wrap":"wrap",gap:"10px"}},F={style:{display:"flex","align-items":"center",margin:"10px"}},P={style:{display:"flex","align-items":"center",margin:"10px"}},V={style:{display:"flex","align-items":"center",margin:"10px"}};function x(e,a,t,i,s,l){const o=(0,n.g2)("el-button"),x=(0,n.g2)("el-text"),w=(0,n.g2)("el-divider"),S=(0,n.g2)("info-filled"),D=(0,n.g2)("el-icon"),W=(0,n.g2)("el-collapse-item"),T=(0,n.g2)("el-collapse"),B=(0,n.g2)("cpu"),O=(0,n.g2)("el-tag"),R=(0,n.g2)("el-tooltip"),E=(0,n.g2)("el-button-group"),$=(0,n.g2)("el-input"),U=(0,n.g2)("el-dialog"),X=(0,n.g2)("el-checkbox"),N=(0,n.g2)("el-col"),z=(0,n.g2)("el-row"),G=(0,n.g2)("el-form-item"),A=(0,n.g2)("el-form");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(o,{onClick:l.goBack},{default:(0,n.k6)((()=>a[9]||(a[9]=[(0,n.eW)("返回配置列表")]))),_:1},8,["onClick"]),(0,n.bF)(o,{onClick:l.reLaunchDetails,loading:s.flushLoading},{default:(0,n.k6)((()=>a[10]||(a[10]=[(0,n.eW)("刷新页面")]))),_:1},8,["onClick","loading"]),(0,n.Lk)("span",r,[(0,n.bF)(x,{type:"primary"},{default:(0,n.k6)((()=>[(0,n.eW)("配置："+(0,c.v_)(this.user.username)+" —— 配置详情",1)])),_:1})]),(0,n.bF)(w,{class:"divider"}),(0,n.Lk)("div",u,[(0,n.bF)(T,{accordion:""},{default:(0,n.k6)((()=>[(0,n.bF)(W,{name:"1"},{title:(0,n.k6)((()=>[(0,n.bF)(D,{class:"header-icon"},{default:(0,n.k6)((()=>[(0,n.bF)(S)])),_:1}),a[11]||(a[11]=(0,n.eW)(" API配置详情（点击向下⬇展开） "))])),default:(0,n.k6)((()=>[(0,n.Lk)("div",null,[(0,n.Lk)("span",g,[(0,n.bF)(x,{type:"info"},{default:(0,n.k6)((()=>[(0,n.eW)("region="+(0,c.v_)(this.ociCfgDetails.region),1)])),_:1})])]),(0,n.Lk)("div",null,[(0,n.Lk)("span",p,[(0,n.bF)(x,{type:"info"},{default:(0,n.k6)((()=>[(0,n.eW)("user="+(0,c.v_)(this.ociCfgDetails.userId),1)])),_:1})])]),(0,n.Lk)("div",null,[(0,n.Lk)("span",m,[(0,n.bF)(x,{type:"info"},{default:(0,n.k6)((()=>[(0,n.eW)("tenancy="+(0,c.v_)(this.ociCfgDetails.tenantId),1)])),_:1})])]),(0,n.Lk)("div",null,[(0,n.Lk)("span",h,[(0,n.bF)(x,{type:"info"},{default:(0,n.k6)((()=>[(0,n.eW)("fingerprint="+(0,c.v_)(this.ociCfgDetails.fingerprint),1)])),_:1})])]),(0,n.Lk)("div",null,[(0,n.Lk)("span",f,[(0,n.bF)(x,{type:"info"},{default:(0,n.k6)((()=>[(0,n.eW)("key_file="+(0,c.v_)(this.ociCfgDetails.privateKeyPath),1)])),_:1})])])])),_:1})])),_:1})]),(0,n.Lk)("div",b,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.ociCfgDetails.instanceList,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.ocId,class:"instance-card"},[(0,n.Lk)("div",k,[(0,n.bF)(D,{class:"server-icon"},{default:(0,n.k6)((()=>[(0,n.bF)(B)])),_:1}),(0,n.Lk)("h3",null,(0,c.v_)(e.name),1)]),(0,n.bF)(w,{class:"divider"}),(0,n.Lk)("div",I,[(0,n.Lk)("p",y,[a[12]||(a[12]=(0,n.Lk)("strong",{style:{"min-width":"100px"}},"Region",-1)),(0,n.bF)(O,null,{default:(0,n.k6)((()=>[(0,n.eW)((0,c.v_)(e.region),1)])),_:2},1024)]),(0,n.Lk)("p",C,[a[13]||(a[13]=(0,n.Lk)("strong",{style:{"min-width":"100px"}},"状态",-1)),(0,n.bF)(O,{type:-1!==e.state.indexOf("RUNNING")?"success":"info"},{default:(0,n.k6)((()=>[(0,n.eW)((0,c.v_)(e.state),1)])),_:2},1032,["type"])]),(0,n.Lk)("p",L,[a[14]||(a[14]=(0,n.Lk)("strong",{style:{"min-width":"100px"}},"Shape",-1)),(0,n.bF)(O,{type:-1!==e.shape.indexOf("A1")?"success":"info"},{default:(0,n.k6)((()=>[(0,n.eW)((0,c.v_)(e.shape),1)])),_:2},1032,["type"])]),(0,n.Lk)("div",_,[a[15]||(a[15]=(0,n.Lk)("strong",{style:{"min-width":"100px"}},"公网IP",-1)),(0,n.Lk)("div",v,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.publicIp,((e,a)=>((0,n.uX)(),(0,n.Wv)(O,{key:a,effect:"plain"},{default:(0,n.k6)((()=>[(0,n.eW)((0,c.v_)(e),1)])),_:2},1024)))),128))])]),(0,n.Lk)("p",F,[a[16]||(a[16]=(0,n.Lk)("strong",{style:{"min-width":"100px"}},"配置",-1)),(0,n.bF)(O,{effect:"plain",type:"info"},{default:(0,n.k6)((()=>[(0,n.eW)((0,c.v_)(e.ocpus)+" 核 / "+(0,c.v_)(e.memory)+" GB / "+(0,c.v_)(e.bootVolumeSize)+" GB ",1)])),_:2},1024)]),(0,n.Lk)("p",P,[a[17]||(a[17]=(0,n.Lk)("strong",{style:{"min-width":"100px"}},"可用域",-1)),(0,n.bF)(O,{effect:"plain",type:"info"},{default:(0,n.k6)((()=>[(0,n.eW)((0,c.v_)(e.availabilityDomain),1)])),_:2},1024)]),(0,n.Lk)("p",V,[a[18]||(a[18]=(0,n.Lk)("strong",{style:{"min-width":"100px"}},"创建时间",-1)),(0,n.bF)(O,{effect:"plain",type:"info"},{default:(0,n.k6)((()=>[(0,n.eW)((0,c.v_)(e.createTime),1)])),_:2},1024)])]),(0,n.bF)(w,{class:"divider"}),(0,n.bF)(E,{class:"ml-4"},{default:(0,n.k6)((()=>[(0,n.bF)(R,{content:"更换IP",placement:"bottom"},{default:(0,n.k6)((()=>[1!==e.enableChangeIp?((0,n.uX)(),(0,n.Wv)(o,{key:0,onClick:a=>l.handleChangeIp(e.ocId),icon:"HelpFilled"},null,8,["onClick"])):(0,n.Q3)("",!0)])),_:2},1024),(0,n.bF)(R,{content:"停止更换IP",placement:"bottom"},{default:(0,n.k6)((()=>[1===e.enableChangeIp?((0,n.uX)(),(0,n.Wv)(o,{key:0,onClick:a=>l.handleStopChangeIp(e.ocId),icon:"HelpFilled",type:"danger"},null,8,["onClick"])):(0,n.Q3)("",!0)])),_:2},1024),(0,n.bF)(R,{content:"编辑实例配置",placement:"bottom"},{default:(0,n.k6)((()=>[(0,n.bF)(o,{onClick:a=>l.handleUpdateInstanceCfg(e.ocId),icon:"Edit",type:"primary"},null,8,["onClick"])])),_:2},1024),(0,n.bF)(R,{content:"启动实例",placement:"bottom"},{default:(0,n.k6)((()=>[-1===e.state.indexOf("RUNNING")?((0,n.uX)(),(0,n.Wv)(o,{key:0,type:"success",icon:"VideoPlay",disabled:-1!==e.state.indexOf("RUNNING"),onClick:a=>l.updateInstanceState(e.ocId,"START")},null,8,["disabled","onClick"])):(0,n.Q3)("",!0)])),_:2},1024),(0,n.bF)(R,{content:"停止实例",placement:"bottom"},{default:(0,n.k6)((()=>[-1===e.state.indexOf("STOPPED")?((0,n.uX)(),(0,n.Wv)(o,{key:0,type:"info",icon:"VideoPause",disabled:-1!==e.state.indexOf("STOPPED"),onClick:a=>l.updateInstanceState(e.ocId,"STOP")},null,8,["disabled","onClick"])):(0,n.Q3)("",!0)])),_:2},1024),(0,n.bF)(R,{content:"重启实例",placement:"bottom"},{default:(0,n.k6)((()=>[(0,n.bF)(o,{type:"warning",icon:"Refresh",onClick:a=>l.updateInstanceState(e.ocId,"RESET")},null,8,["onClick"])])),_:2},1024),(0,n.bF)(R,{content:"终止实例（操作不可逆，请谨慎操作）",placement:"bottom"},{default:(0,n.k6)((()=>[(0,n.bF)(o,{type:"danger",icon:"Delete",disabled:-1!==e.state.indexOf("TERMINATING"),onClick:a=>l.handleTerminateInstance(e.ocId)},null,8,["disabled","onClick"])])),_:2},1024)])),_:2},1024)])))),128))]),(0,n.bF)(U,{modelValue:s.dialogVisible,"onUpdate:modelValue":a[2]||(a[2]=e=>s.dialogVisible=e),title:"可指定多个 CIDR 网段，回车保存，传空则随机更换一个IP",width:"40%",onClose:a[3]||(a[3]=e=>s.dialogVisible=!1)},{footer:(0,n.k6)((()=>[(0,n.bF)(o,{onClick:a[1]||(a[1]=e=>s.dialogVisible=!1)},{default:(0,n.k6)((()=>a[20]||(a[20]=[(0,n.eW)("取消")]))),_:1}),(0,n.bF)(o,{type:"primary",onClick:l.changeIp,loading:s.changeIpLoading},{default:(0,n.k6)((()=>a[21]||(a[21]=[(0,n.eW)("新增更换IP任务")]))),_:1},8,["onClick","loading"])])),default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.changeIpParams.cidrList,(e=>((0,n.uX)(),(0,n.Wv)(O,{key:e,closable:"",onClose:a=>l.handleClose(e)},{default:(0,n.k6)((()=>[(0,n.eW)((0,c.v_)(e),1)])),_:2},1032,["onClose"])))),128)),s.inputVisible?((0,n.uX)(),(0,n.Wv)($,{key:0,ref:"InputRef",modelValue:s.inputValue,"onUpdate:modelValue":a[0]||(a[0]=e=>s.inputValue=e),class:"w-20",onKeyup:(0,d.jR)(l.handleInputConfirm,["enter"]),onBlur:l.handleInputConfirm},null,8,["modelValue","onKeyup","onBlur"])):((0,n.uX)(),(0,n.Wv)(o,{key:1,class:"button-new-tag",size:"small",onClick:l.showInput},{default:(0,n.k6)((()=>a[19]||(a[19]=[(0,n.eW)(" + New CIDR")]))),_:1},8,["onClick"]))])),_:1},8,["modelValue"]),(0,n.bF)(U,{title:"终止实例",modelValue:s.terminateDialogVisible,"onUpdate:modelValue":a[7]||(a[7]=e=>s.terminateDialogVisible=e),width:"500px",onClose:a[8]||(a[8]=e=>s.terminateDialogVisible=!1)},{footer:(0,n.k6)((()=>[(0,n.bF)(o,{onClick:a[6]||(a[6]=e=>s.terminateDialogVisible=!1)},{default:(0,n.k6)((()=>a[24]||(a[24]=[(0,n.eW)("取消")]))),_:1}),(0,n.bF)(o,{onClick:l.sendCaptcha,loading:s.sendLoading},{default:(0,n.k6)((()=>a[25]||(a[25]=[(0,n.eW)("发送验证码")]))),_:1},8,["onClick","loading"]),(0,n.bF)(o,{type:"danger",disabled:""===s.form.verificationCode,loading:s.terminateLoading,onClick:l.terminateInstance},{default:(0,n.k6)((()=>a[26]||(a[26]=[(0,n.eW)(" 确认终止 ")]))),_:1},8,["disabled","loading","onClick"])])),default:(0,n.k6)((()=>[(0,n.Lk)("div",null,[a[23]||(a[23]=(0,n.Lk)("p",null,"终止实例将不可恢复，请确认以下选项：",-1)),(0,n.bF)(z,null,{default:(0,n.k6)((()=>[(0,n.bF)(N,{span:24},{default:(0,n.k6)((()=>[(0,n.bF)(X,{modelValue:s.retainBootVolume,"onUpdate:modelValue":a[4]||(a[4]=e=>s.retainBootVolume=e)},{default:(0,n.k6)((()=>a[22]||(a[22]=[(0,n.eW)(" 保留引导卷及数据 ")]))),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,n.bF)(w,{class:"divider"}),(0,n.bF)(z,null,{default:(0,n.k6)((()=>[(0,n.bF)(N,{span:24},{default:(0,n.k6)((()=>[(0,n.bF)(A,{model:s.form,ref:"form","label-width":"70px"},{default:(0,n.k6)((()=>[(0,n.bF)(G,{label:"验证码"},{default:(0,n.k6)((()=>[(0,n.bF)($,{modelValue:s.form.verificationCode,"onUpdate:modelValue":a[5]||(a[5]=e=>s.form.verificationCode=e),placeholder:"请输入验证码",maxlength:"10",clearable:""},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1})])),_:1})])])),_:1},8,["modelValue"])],64)}t(4114);var w=t(1219),S=t(2933),D=t(7477),W={components:{cpu:D.cpu},data(){return{flushLoading:!1,changeIpLoading:!1,sendLoading:!1,dialogVisible:!1,terminateDialogVisible:!1,terminateLoading:!1,retainBootVolume:!1,form:{verificationCode:""},inputVisible:!1,inputValue:"",user:{},changeIpParams:{ociCfgId:"",instanceId:"",cidrList:[]},ociCfgDetails:{},UpdateInstanceStateParams:{ociCfgId:"",instanceId:"",action:""},SendCaptchaParams:{ociCfgId:"",instanceId:""},TerminateInstanceParams:{ociCfgId:"",instanceId:"",preserveBootVolume:0,captcha:""},GetOciCfgDetailsParams:{cfgId:"",cleanReLaunchDetails:!1}}},mounted(){this.user.id=this.$route.query.cfgId,this.user.username=this.$route.query.username,this.changeIpParams.ociCfgId=this.$route.query.cfgId,this.GetOciCfgDetailsParams.cfgId=this.$route.query.cfgId,this.getOciCfgDetails()},methods:{goBack(){this.$router.back()},handleClose(e){const a=this.changeIpParams.cidrList.indexOf(e);-1!==a&&this.changeIpParams.cidrList.splice(a,1)},handleStopChangeIp(e){const a=window.confirm("确定要停止更换IP任务吗?");a?this.stopChangeIp(e):this.$message.info("已取消")},handleUpdateInstanceCfg(e){this.$router.push({path:"/dashboard/ociUpdateInstanceCfg",query:{ocId:e,ociCfgId:this.user.id,username:this.user.username}})},stopChangeIp(e){this.$axios.post("/oci/stopChangeIp",{instanceId:e}).then((e=>{e.data.success?(0,w.nk)({message:e.data.msg,type:"success",duration:2e3}):(0,w.nk)({message:e.data.msg,type:"error",duration:2e3}),this.getOciCfgDetails()})).catch((e=>{console.error("Error:",e)}))},showInput(){this.inputVisible=!0,this.$nextTick((()=>{this.$refs.InputRef.focus()}))},handleInputConfirm(){this.inputValue&&!this.changeIpParams.cidrList.includes(this.inputValue)&&this.changeIpParams.cidrList.push(this.inputValue),this.inputValue="",this.inputVisible=!1},reLaunchDetails(){this.GetOciCfgDetailsParams.cleanReLaunchDetails=!0,this.getOciCfgDetails(),this.GetOciCfgDetailsParams.cleanReLaunchDetails=!1},async getOciCfgDetails(){this.ociCfgDetails.instanceList=[],this.flushLoading=!0,await this.$axios.post("/oci/details",{cfgId:this.changeIpParams.ociCfgId,cleanReLaunchDetails:this.GetOciCfgDetailsParams.cleanReLaunchDetails}).then((e=>{e.data.success?(this.ociCfgDetails=e.data.data,(0,w.nk)({message:e.data.msg,type:"success",duration:2e3}),this.flushLoading=!1):(0,w.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)}))},handleChangeIp(e){this.dialogVisible=!0,this.changeIpParams.instanceId=e},changeIp(){this.changeIpLoading=!0,this.$axios.post("/oci/changeIp",{...this.changeIpParams}).then((e=>{e.data.success?((0,w.nk)({message:e.data.msg,type:"success",duration:2e3}),this.changeIpLoading=!1,this.dialogVisible=!1,this.getOciCfgDetails()):(0,w.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)}))},async updateInstanceState(e,a){let t="";switch(a){case"START":t="确定要启动实例吗？";break;case"STOP":t="确定要停止实例吗？";break;case"RESET":t="确定要重新启动实例吗？";break;default:t="确定要执行此操作吗？"}try{const n=await S.s.confirm(t,"确认操作",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});"confirm"===n&&(this.UpdateInstanceStateParams.ociCfgId=this.user.id,this.UpdateInstanceStateParams.instanceId=e,this.UpdateInstanceStateParams.action=a,await this.$axios.post("/oci/updateInstanceState",{...this.UpdateInstanceStateParams}).then((e=>{e.data.success?((0,w.nk)({message:e.data.msg,type:"success",duration:2e3}),this.getOciCfgDetails()):(0,w.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e),(0,w.nk)({message:"更新实例状态时出错",type:"error",duration:2e3})})))}catch(n){(0,w.nk)({message:"操作已取消",type:"info",duration:2e3})}},handleTerminateInstance(e){this.TerminateInstanceParams.instanceId=e,this.terminateDialogVisible=!0},sendCaptcha(){this.sendLoading=!0,this.SendCaptchaParams.ociCfgId=this.user.id,this.SendCaptchaParams.instanceId=this.TerminateInstanceParams.instanceId,this.$axios.post("/oci/sendCaptcha",{...this.SendCaptchaParams}).then((e=>{e.data.success?((0,w.nk)({message:e.data.msg,type:"success",duration:2e3}),this.changeIpLoading=!1,this.dialogVisible=!1,this.sendLoading=!1):(0,w.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)}))},async terminateInstance(){this.terminateLoading=!0,this.TerminateInstanceParams.ociCfgId=this.user.id,this.TerminateInstanceParams.preserveBootVolume=!0===this.retainBootVolume?1:0,this.TerminateInstanceParams.captcha=this.form.verificationCode,this.$axios.post("/oci/terminateInstance",{...this.TerminateInstanceParams}).then((e=>{e.data.success?((0,w.nk)({message:e.data.msg,type:"success",duration:2e3}),this.getOciCfgDetails()):(0,w.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e),(0,w.nk)({message:"终止实例时发生错误",type:"error",duration:2e3})})).finally((()=>{this.terminateLoading=!1,this.terminateDialogVisible=!1}))}}},T=t(1241);const B=(0,T.A)(W,[["render",x]]);var O=B;const R={style:{"overflow-x":"auto"}};function E(e,a,t,i,s,l){const o=(0,n.g2)("el-button"),d=(0,n.g2)("el-input"),r=(0,n.g2)("el-table-column"),u=(0,n.g2)("el-tooltip"),g=(0,n.g2)("el-tag"),p=(0,n.g2)("el-table"),m=(0,n.g2)("el-pagination"),h=(0,n.gN)("loading");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{type:"success",style:{"margin-bottom":"20px"},onClick:l.cleanReLaunch},{default:(0,n.k6)((()=>a[3]||(a[3]=[(0,n.eW)(" 刷新 ")]))),_:1},8,["onClick"]),(0,n.bF)(d,{modelValue:s.pageParams.keyword,"onUpdate:modelValue":a[0]||(a[0]=e=>s.pageParams.keyword=e),placeholder:"模糊搜索",onInput:l.getBvList,clearable:"","prefix-icon":"Search",style:{"margin-left":"20px",width:"200px","margin-bottom":"20px"}},null,8,["modelValue","onInput"]),(0,n.bF)(o,{type:"danger",onClick:l.batchTerminate,disabled:!s.batchSelected.length,style:{"margin-left":"20px","margin-bottom":"20px"}},{default:(0,n.k6)((()=>a[4]||(a[4]=[(0,n.eW)(" 批量终止 ")]))),_:1},8,["onClick","disabled"]),(0,n.Lk)("div",R,[(0,n.bo)(((0,n.uX)(),(0,n.Wv)(p,{data:s.BootVolumesRsp,style:{width:"100%","min-width":"800px"},onSelectionChange:l.handleSelectionChange},{default:(0,n.k6)((()=>[(0,n.bF)(r,{type:"selection",width:"35",selectable:l.isSelectable},null,8,["selectable"]),(0,n.bF)(r,{label:"名称"},{default:(0,n.k6)((({row:e})=>[(0,n.bF)(u,{content:e.displayName,placement:"top"},{default:(0,n.k6)((()=>[(0,n.eW)((0,c.v_)(e.displayName),1)])),_:2},1032,["content"])])),_:1}),(0,n.bF)(r,{label:"可用域"},{default:(0,n.k6)((({row:e})=>[(0,n.bF)(u,{content:e.availabilityDomain,placement:"top"},{default:(0,n.k6)((()=>[(0,n.bF)(g,{type:"primary"},{default:(0,n.k6)((()=>[(0,n.eW)((0,c.v_)(e.availabilityDomain),1)])),_:2},1024)])),_:2},1032,["content"])])),_:1}),(0,n.bF)(r,{label:"状态"},{default:(0,n.k6)((({row:e})=>[(0,n.bF)(u,{content:e.lifecycleState,placement:"top"},{default:(0,n.k6)((()=>[(0,n.bF)(g,{type:"AVAILABLE"===e.lifecycleState?"success":"info"},{default:(0,n.k6)((()=>[(0,n.eW)((0,c.v_)(e.lifecycleState),1)])),_:2},1032,["type"])])),_:2},1032,["content"])])),_:1}),(0,n.bF)(r,{prop:"vpusPerGB",label:"VPU"}),(0,n.bF)(r,{prop:"sizeInGBs",label:"硬盘（GB）"}),(0,n.bF)(r,{prop:"timeCreated",label:"创建时间"}),(0,n.bF)(r,{label:"已附加实例"},{default:(0,n.k6)((({row:e})=>[(0,n.bF)(u,{content:e.instanceName,placement:"top"},{default:(0,n.k6)((()=>[null!==e.instanceName?((0,n.uX)(),(0,n.Wv)(g,{key:0,type:"primary"},{default:(0,n.k6)((()=>[(0,n.eW)((0,c.v_)(e.instanceName),1)])),_:2},1024)):(0,n.Q3)("",!0)])),_:2},1032,["content"])])),_:1}),(0,n.bF)(r,{fixed:"right",label:"操作",width:"100"},{default:(0,n.k6)((({row:e})=>[(0,n.bF)(o,{onClick:a=>l.handleTerminate(e),type:"danger",link:"",disabled:e.attached},{default:(0,n.k6)((()=>a[5]||(a[5]=[(0,n.eW)(" 终止 ")]))),_:2},1032,["onClick","disabled"])])),_:1})])),_:1},8,["data","onSelectionChange"])),[[h,s.loading]])]),(0,n.bF)(m,{onCurrentChange:l.handlePageChange,onSizeChange:l.handleSizeChange,"current-page":s.pageParams.currentPage,"onUpdate:currentPage":a[1]||(a[1]=e=>s.pageParams.currentPage=e),"page-size":s.pageParams.pageSize,"onUpdate:pageSize":a[2]||(a[2]=e=>s.pageParams.pageSize=e),"page-sizes":[5,10,20,50],total:s.total,layout:"total, sizes, prev, pager, next, jumper",style:{"margin-top":"20px"}},null,8,["onCurrentChange","onSizeChange","current-page","page-size","total"])])}t(1454);var $={mounted(){this.pageParams.ociCfgId=this.$route.query.cfgId,this.TerminateBootVolumeParams.ociCfgId=this.$route.query.cfgId,this.username=this.$route.query.username,this.getBvList()},data(){return{username:"",pageParams:{cleanReLaunch:!1,ociCfgId:"",keyword:"",currentPage:1,pageSize:5},total:0,BootVolumesRsp:[],batchSelected:[],TerminateBootVolumeParams:{ociCfgId:"",bootVolumeIds:[]},loading:!0}},methods:{async getBvList(){await this.$axios.post("/bootVolume/page",{...this.pageParams}).then((e=>{e.data.success?(this.BootVolumesRsp=e.data.data.records,this.total=e.data.data.total):(0,w.nk)({message:e.data.msg,type:"error",duration:2e3}),this.loading=!1})).catch((e=>{console.error("Error:",e)}))},cleanReLaunch(){this.pageParams.cleanReLaunch=!0,this.loading=!0,this.getBvList(),this.pageParams.cleanReLaunch=!1},async batchTerminate(){const e=window.confirm("确定要终止引导卷吗");e?(this.TerminateBootVolumeParams.bootVolumeIds=this.batchSelected.map((e=>e.id)),await this.$axios.post("/bootVolume/terminate",{...this.TerminateBootVolumeParams}).then((e=>{e.data.success?((0,w.nk)({message:e.data.msg,type:"success",duration:2e3}),this.cleanReLaunch()):(0,w.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)}))):this.$message.info("已取消")},handleTerminate(e){const a=window.confirm("确定要终止引导卷吗");a?(this.TerminateBootVolumeParams.bootVolumeIds.push(e.id),this.batchTerminate()):this.$message.info("已取消")},isSelectable(e){return!e.attached},handlePageChange(e){this.pageParams.currentPage=e,this.getBvList()},handleSizeChange(e){this.pageParams.currentPage=1,this.pageParams.pageSize=e,this.getBvList()},handleSelectionChange(e){this.batchSelected=e}}};const U=(0,T.A)($,[["render",E]]);var X=U,N={mounted(){this.cfgId=this.$route.query.cfgId,this.username=this.$route.query.username},data(){return{activeTab:"OciInstanceInfo",cfgId:"",username:""}},methods:{handleTabClick(e){console.log(`Switched to tab: ${e.name}`)}},components:{OciInstanceInfo:O,BootVolumeList:X}};const z=(0,T.A)(N,[["render",o]]);var G=z}}]);
//# sourceMappingURL=950.474fa75d.js.map