{"version":3,"file":"js/452.538f88e7.js","mappings":"0LAAAA,IAAA,EA4BiDC,MAAM,iB,6RA3BrDC,EAAAA,EAAAA,IAoDeC,EAAA,CApDDC,MAAA,kBAAsB,CADtCC,SAAAC,EAAAA,EAAAA,KAEI,IA8CW,EA9CXC,EAAAA,EAAAA,IA8CWC,EAAA,CA9CDC,MAAM,QAAQR,MAAM,c,CAFlCI,SAAAC,EAAAA,EAAAA,KAGM,IAiBU,EAjBVC,EAAAA,EAAAA,IAiBUG,EAAA,MApBhBL,SAAAC,EAAAA,EAAAA,KAIQ,IAA6D,EAA7DC,EAAAA,EAAAA,IAA6DI,EAAA,CAApDV,MAAM,OAAOW,KAAK,S,CAJnCP,SAAAC,EAAAA,EAAAA,KAI2C,IAAgBO,EAAA,KAAAA,EAAA,KAJ3DC,EAAAA,EAAAA,IAI2C,wBAJ3CC,EAAA,KAKQR,EAAAA,EAAAA,IAEeS,EAAA,CAFDZ,MAAA,uBAAwB,CAL9CC,SAAAC,EAAAA,EAAAA,KAMU,IAA2G,EAA3GC,EAAAA,EAAAA,IAA2GU,EAAA,CANrHC,WAM6BC,EAAAC,mBAAmBC,WANhD,sBAAAR,EAAA,KAAAA,EAAA,GAAAS,GAM6BH,EAAAC,mBAAmBC,WAAUC,GAAEC,YAAY,wBAAwBC,UAAA,I,0BANhGT,EAAA,KAQQR,EAAAA,EAAAA,IAAyDI,EAAA,CAAhDV,MAAM,OAAOW,KAAK,S,CARnCP,SAAAC,EAAAA,EAAAA,KAQ2C,IAAYO,EAAA,KAAAA,EAAA,KARvDC,EAAAA,EAAAA,IAQ2C,oBAR3CC,EAAA,KASQR,EAAAA,EAAAA,IAEeS,EAAA,CAFDZ,MAAA,uBAAwB,CAT9CC,SAAAC,EAAAA,EAAAA,KAUU,IAA8F,EAA9FC,EAAAA,EAAAA,IAA8FU,EAAA,CAVxGC,WAU6BC,EAAAC,mBAAmBK,SAVhD,sBAAAZ,EAAA,KAAAA,EAAA,GAAAS,GAU6BH,EAAAC,mBAAmBK,SAAQH,GAAEC,YAAY,aAAaC,UAAA,I,0BAVnFT,EAAA,KAYQR,EAAAA,EAAAA,IAA2DI,EAAA,CAAlDV,MAAM,OAAOW,KAAK,S,CAZnCP,SAAAC,EAAAA,EAAAA,KAY2C,IAAcO,EAAA,KAAAA,EAAA,KAZzDC,EAAAA,EAAAA,IAY2C,sBAZ3CC,EAAA,KAaQR,EAAAA,EAAAA,IAEeS,EAAA,CAFDZ,MAAA,uBAAwB,CAb9CC,SAAAC,EAAAA,EAAAA,KAcU,IAAkG,EAAlGC,EAAAA,EAAAA,IAAkGU,EAAA,CAd5GC,WAc6BC,EAAAC,mBAAmBM,UAdhD,sBAAAb,EAAA,KAAAA,EAAA,GAAAS,GAc6BH,EAAAC,mBAAmBM,UAASJ,GAAEC,YAAY,gBAAgBC,UAAA,I,0BAdvFT,EAAA,KAgBQR,EAAAA,EAAAA,IAAqDI,EAAA,CAA5CV,MAAM,OAAOW,KAAK,S,CAhBnCP,SAAAC,EAAAA,EAAAA,KAgB2C,IAAQO,EAAA,MAAAA,EAAA,MAhBnDC,EAAAA,EAAAA,IAgB2C,gBAhB3CC,EAAA,KAiBQR,EAAAA,EAAAA,IAEeS,EAAA,CAFDZ,MAAA,uBAAwB,CAjB9CC,SAAAC,EAAAA,EAAAA,KAkBU,IAAgG,EAAhGC,EAAAA,EAAAA,IAAgGU,EAAA,CAlB1GC,WAkB6BC,EAAAC,mBAAmBO,WAlBhD,sBAAAd,EAAA,KAAAA,EAAA,GAAAS,GAkB6BH,EAAAC,mBAAmBO,WAAUL,GAAEC,YAAY,aAAaC,UAAA,I,0BAlBrFT,EAAA,OAAAA,EAAA,KAqBMR,EAAAA,EAAAA,IAsBUG,EAAA,MA3ChBL,SAAAC,EAAAA,EAAAA,KAuBQ,IAEe,EAFfC,EAAAA,EAAAA,IAEeS,EAAA,CAFDY,MAAM,aAAaxB,MAAA,uB,CAvBzCC,SAAAC,EAAAA,EAAAA,KAwBU,IAAuF,EAAvFC,EAAAA,EAAAA,IAAuFsB,EAAA,CAxBjGX,WAwB8BC,EAAAC,mBAAmBU,UAxBjD,sBAAAjB,EAAA,KAAAA,EAAA,GAAAS,GAwB8BH,EAAAC,mBAAmBU,UAASR,GAAE,cAAY,KAAK,gBAAc,M,0BAxB3FP,EAAA,KA0BQR,EAAAA,EAAAA,IAA6EI,EAAA,CAApEV,MAAM,QAAM,CA1B7BI,SAAAC,EAAAA,EAAAA,KA0B8B,IAA6CO,EAAA,MAAAA,EAAA,MA1B3EC,EAAAA,EAAAA,IA0B8B,qDA1B9BC,EAAA,IA4BmBI,EAAAC,mBAAmBU,YAAS,WAAvCC,EAAAA,EAAAA,IAcM,MAdNC,EAcM,EAbJzB,EAAAA,EAAAA,IAIE0B,EAAA,CAHE7B,MAAA,mDACC8B,IAAKf,EAAAC,mBAAmBe,UACzBC,IAAI,W,iBAGR7B,EAAAA,EAAAA,IAMEU,EAAA,CAzCZC,WAoCuBC,EAAAC,mBAAmBiB,UApC1C,sBAAAxB,EAAA,KAAAA,EAAA,GAAAS,GAoCuBH,EAAAC,mBAAmBiB,UAASf,GACrClB,MAAA,oCACAkC,SAAA,GACAf,YAAY,GACZK,MAAM,Q,2BAxCpBW,EAAAA,EAAAA,IAAA,UAAAxB,EAAA,KA4CMR,EAAAA,EAAAA,IAGYiC,EAAA,CAHDC,KAAK,UAAUrC,MAAA,sBACdsC,QAAOC,EAAAC,aAAeC,QAAS1B,EAAA2B,Y,CA7CjDzC,SAAAC,EAAAA,EAAAA,KA6C6D,IAEvDO,EAAA,MAAAA,EAAA,MA/CNC,EAAAA,EAAAA,IA6C6D,cA7C7DC,EAAA,G,4BAAAA,EAAA,KAiDIR,EAAAA,EAAAA,IAGUwC,EAAA,CAHD9C,MAAM,eAAa,CAjDhCI,SAAAC,EAAAA,EAAAA,KAkDM,IAAuF,EAAvFC,EAAAA,EAAAA,IAAuFU,EAAA,CAA7EwB,KAAK,WAlDrBvB,WAkDyCC,EAAA6B,QAlDzC,sBAAAnC,EAAA,KAAAA,EAAA,GAAAS,GAkDyCH,EAAA6B,QAAO1B,GAAEC,YAAY,SAAU0B,KAAM,I,wBACxE1C,EAAAA,EAAAA,IAAoFiC,EAAA,CAAzEC,KAAK,UAAWC,QAAOC,EAAAO,QAAUL,QAAS1B,EAAAgC,a,CAnD3D9C,SAAAC,EAAAA,EAAAA,KAmDwE,IAAMO,EAAA,MAAAA,EAAA,MAnD9EC,EAAAA,EAAAA,IAmDwE,cAnDxEC,EAAA,G,4BAAAA,EAAA,OAAAA,EAAA,G,eA2DA,GACEqC,IAAAA,GACE,MAAO,CACLN,YAAY,EACZK,aAAa,EACb/B,mBAAoB,CAClBM,UAAW,GACXC,WAAY,GACZF,SAAU,GACVJ,WAAY,GACZS,UAAW,GACXO,UAAW,GACXF,UAAW,IAEba,QAAS,GAEb,EACAK,OAAAA,GACEC,KAAKC,WACP,EACAC,QAAS,CACP,eAAMD,SACED,KAAKG,OAAOC,KAAK,iBAAkB,CAAC,GACrCC,MAAKC,IACAA,EAASR,KAAKS,QAMhBP,KAAKlC,mBAAqBwC,EAASR,KAAKA,MAExCU,EAAAA,EAAAA,IAAU,CACRd,QAASY,EAASR,KAAKW,IACvBtB,KAAM,QACNuB,SAAU,KAEd,IAEDC,OAAMC,IACLC,QAAQD,MAAM,SAAUA,EAAM,GAEtC,EACA,kBAAMtB,GACJU,KAAKR,YAAa,QACZQ,KAAKG,OAAOC,KAAK,oBAAqB,IAAIJ,KAAKlC,qBAChDuC,MAAKC,IACAA,EAASR,KAAKS,UAChBC,EAAAA,EAAAA,IAAU,CACRd,QAASY,EAASR,KAAKW,IACvBtB,KAAM,UACNuB,SAAU,MAEZV,KAAKR,YAAa,EAClBQ,KAAKC,cAELO,EAAAA,EAAAA,IAAU,CACRd,QAASY,EAASR,KAAKW,IACvBtB,KAAM,QACNuB,SAAU,KAEd,IAEDC,OAAMC,IACLC,QAAQD,MAAM,SAAUA,EAAM,GAEtC,EACA,aAAMhB,GACJI,KAAKH,aAAc,QACbG,KAAKG,OAAOC,KAAK,eAAgB,CAACV,QAASM,KAAKN,UACjDW,MAAKC,IACAA,EAASR,KAAKS,UAChBC,EAAAA,EAAAA,IAAU,CACRd,QAASY,EAASR,KAAKW,IACvBtB,KAAM,UACNuB,SAAU,MAEZV,KAAKH,aAAc,IAEnBW,EAAAA,EAAAA,IAAU,CACRd,QAASY,EAASR,KAAKW,IACvBtB,KAAM,QACNuB,SAAU,KAEd,IAEDC,OAAMC,IACLC,QAAQD,MAAM,SAAUA,EAAM,GAEtC,I,UC7IJ,MAAME,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://oci-help-web/./src/components/SysCfg.vue","webpack://oci-help-web/./src/components/SysCfg.vue?d9ce"],"sourcesContent":["<template>\r\n  <el-container style=\"height: 100vh;\">\r\n    <el-aside width=\"700px\" class=\"left-panel\">\r\n      <el-form>\r\n        <el-text class=\"mx-1\" size=\"large\">telegram机器人Token</el-text>\r\n        <el-form-item style=\"margin-top: 10px\">\r\n          <el-input v-model=\"UpdateSysCfgParams.tgBotToken\" placeholder=\"12345678:AAGC8NFfxxxx\" clearable></el-input>\r\n        </el-form-item>\r\n        <el-text class=\"mx-1\" size=\"large\">telegram个人ID</el-text>\r\n        <el-form-item style=\"margin-top: 10px\">\r\n          <el-input v-model=\"UpdateSysCfgParams.tgChatId\" placeholder=\"61945xxxxx\" clearable></el-input>\r\n        </el-form-item>\r\n        <el-text class=\"mx-1\" size=\"large\">钉钉access_token</el-text>\r\n        <el-form-item style=\"margin-top: 10px\">\r\n          <el-input v-model=\"UpdateSysCfgParams.dingToken\" placeholder=\"0b0bf9f89xxxx\" clearable></el-input>\r\n        </el-form-item>\r\n        <el-text class=\"mx-1\" size=\"large\">钉钉secret</el-text>\r\n        <el-form-item style=\"margin-top: 10px\">\r\n          <el-input v-model=\"UpdateSysCfgParams.dingSecret\" placeholder=\"SEC1ebxxxx\" clearable></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <el-form>\r\n        <!-- 新增开关 -->\r\n        <el-form-item label=\"是否启用谷歌MFA：\" style=\"margin-top: 10px\">\r\n          <el-switch v-model=\"UpdateSysCfgParams.enableMfa\" active-text=\"启用\" inactive-text=\"禁用\"/>\r\n        </el-form-item>\r\n        <el-text class=\"mx-1\">⭐PS：如果禁用后重新启用，需要在谷歌MFA上删除旧的验证码，重新扫码绑定谷歌MFA❗❗❗</el-text>\r\n        <!-- 条件显示图片 -->\r\n        <div v-if=\"UpdateSysCfgParams.enableMfa\" class=\"image-preview\">\r\n          <el-image\r\n              style=\"margin-top: 20px; width: 300px; height: 300px\"\r\n              :src=\"UpdateSysCfgParams.mfaQrData\"\r\n              fit=\"contain\"\r\n          />\r\n          <!-- 输入框 -->\r\n          <el-input\r\n              v-model=\"UpdateSysCfgParams.mfaSecret\"\r\n              style=\"margin-top: 10px; width: 400px\"\r\n              disabled\r\n              placeholder=\"\"\r\n              label=\"xxxx\"\r\n          />\r\n        </div>\r\n      </el-form>\r\n      <el-button type=\"primary\" style=\"margin-top: 10px\"\r\n                 @click=\"updateSysCfg\" :loading=\"cfgLoading\">\r\n        更新配置\r\n      </el-button>\r\n    </el-aside>\r\n    <el-main class=\"right-panel\">\r\n      <el-input type=\"textarea\" v-model=\"message\" placeholder=\"输入测试文本\" :rows=\"20\"></el-input>\r\n      <el-button type=\"primary\" @click=\"sendMsg\" :loading=\"sendLoading\">测试消息发送</el-button>\r\n    </el-main>\r\n  </el-container>\r\n</template>\r\n\r\n<script>\r\nimport {ElMessage} from \"element-plus\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      cfgLoading: false,\r\n      sendLoading: false,\r\n      UpdateSysCfgParams: {\r\n        dingToken: '',\r\n        dingSecret: '',\r\n        tgChatId: '',\r\n        tgBotToken: '',\r\n        enableMfa: '',\r\n        mfaSecret: '',\r\n        mfaQrData: ''\r\n      },\r\n      message: ''\r\n    };\r\n  },\r\n  mounted() {\r\n    this.getSysCfg()\r\n  },\r\n  methods: {\r\n    async getSysCfg() {\r\n      await this.$axios.post('/sys/getSysCfg', {})\r\n          .then(response => {\r\n            if (response.data.success) {\r\n              // ElMessage({\r\n              //   message: response.data.msg,\r\n              //   type: 'success',\r\n              //   duration: 2000 // 设置提示显示时间，单位是毫秒\r\n              // });\r\n              this.UpdateSysCfgParams = response.data.data\r\n            } else {\r\n              ElMessage({\r\n                message: response.data.msg,\r\n                type: 'error',\r\n                duration: 2000 // 设置提示显示时间，单位是毫秒\r\n              });\r\n            }\r\n          })\r\n          .catch(error => {\r\n            console.error('Error:', error)\r\n          })\r\n    },\r\n    async updateSysCfg() {\r\n      this.cfgLoading = true\r\n      await this.$axios.post('/sys/updateSysCfg', {...this.UpdateSysCfgParams})\r\n          .then(response => {\r\n            if (response.data.success) {\r\n              ElMessage({\r\n                message: response.data.msg,\r\n                type: 'success',\r\n                duration: 2000 // 设置提示显示时间，单位是毫秒\r\n              });\r\n              this.cfgLoading = false\r\n              this.getSysCfg()\r\n            } else {\r\n              ElMessage({\r\n                message: response.data.msg,\r\n                type: 'error',\r\n                duration: 2000 // 设置提示显示时间，单位是毫秒\r\n              });\r\n            }\r\n          })\r\n          .catch(error => {\r\n            console.error('Error:', error)\r\n          })\r\n    },\r\n    async sendMsg() {\r\n      this.sendLoading = true\r\n      await this.$axios.post('/sys/sendMsg', {message: this.message})\r\n          .then(response => {\r\n            if (response.data.success) {\r\n              ElMessage({\r\n                message: response.data.msg,\r\n                type: 'success',\r\n                duration: 2000 // 设置提示显示时间，单位是毫秒\r\n              });\r\n              this.sendLoading = false\r\n            } else {\r\n              ElMessage({\r\n                message: response.data.msg,\r\n                type: 'error',\r\n                duration: 2000 // 设置提示显示时间，单位是毫秒\r\n              });\r\n            }\r\n          })\r\n          .catch(error => {\r\n            console.error('Error:', error)\r\n          })\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.left-panel, .right-panel {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 10px;\r\n  padding: 20px;\r\n}\r\n\r\n.right-panel {\r\n  flex: 1;\r\n}\r\n\r\n.el-input[type=\"textarea\"] {\r\n  flex: 1;\r\n  resize: none;\r\n}\r\n</style>\r\n","import { render } from \"./SysCfg.vue?vue&type=template&id=65231ee3&scoped=true\"\nimport script from \"./SysCfg.vue?vue&type=script&lang=js\"\nexport * from \"./SysCfg.vue?vue&type=script&lang=js\"\n\nimport \"./SysCfg.vue?vue&type=style&index=0&id=65231ee3&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-65231ee3\"]])\n\nexport default __exports__"],"names":["key","class","_createBlock","_component_el_container","style","default","_withCtx","_createVNode","_component_el_aside","width","_component_el_form","_component_el_text","size","_cache","_createTextVNode","_","_component_el_form_item","_component_el_input","modelValue","$data","UpdateSysCfgParams","tgBotToken","$event","placeholder","clearable","tgChatId","dingToken","dingSecret","label","_component_el_switch","enableMfa","_createElementBlock","_hoisted_1","_component_el_image","src","mfaQrData","fit","mfaSecret","disabled","_createCommentVNode","_component_el_button","type","onClick","$options","updateSysCfg","loading","cfgLoading","_component_el_main","message","rows","sendMsg","sendLoading","data","mounted","this","getSysCfg","methods","$axios","post","then","response","success","ElMessage","msg","duration","catch","error","console","__exports__","render"],"sourceRoot":""}