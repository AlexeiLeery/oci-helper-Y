"use strict";(self["webpackChunkoci_help_web"]=self["webpackChunkoci_help_web"]||[]).push([[371],{5371:function(e,a,o){o.r(a),o.d(a,{default:function(){return c}});var l=o(6768),t=o(5130);const n={class:"login-container"};function s(e,a,o,s,r,i){const d=(0,l.g2)("el-input"),u=(0,l.g2)("el-form-item"),c=(0,l.g2)("el-button"),g=(0,l.g2)("el-form"),m=(0,l.g2)("el-card"),h=(0,l.g2)("el-link"),b=(0,l.g2)("el-footer");return(0,l.uX)(),(0,l.CE)("div",n,[(0,l.bF)(m,{class:"login-card"},{default:(0,l.k6)((()=>[a[4]||(a[4]=(0,l.Lk)("h2",{class:"login-title"},"oci-helper Login",-1)),(0,l.bF)(g,{onSubmit:(0,t.D$)(i.login,["prevent"]),onKeydown:(0,t.jR)((0,t.D$)(i.login,["prevent"]),["enter"])},{default:(0,l.k6)((()=>[(0,l.bF)(u,{label:"","label-width":"0%"},{default:(0,l.k6)((()=>[(0,l.bF)(d,{modelValue:r.loginParams.account,"onUpdate:modelValue":a[0]||(a[0]=e=>r.loginParams.account=e),placeholder:"请输入账号",clearable:""},null,8,["modelValue"])])),_:1}),(0,l.bF)(u,{label:"","label-width":"0%"},{default:(0,l.k6)((()=>[(0,l.bF)(d,{"show-password":"",modelValue:r.loginParams.password,"onUpdate:modelValue":a[1]||(a[1]=e=>r.loginParams.password=e),placeholder:"请输入密码",type:"password",clearable:""},null,8,["modelValue"])])),_:1}),r.enableMfa?((0,l.uX)(),(0,l.Wv)(u,{key:0},{default:(0,l.k6)((()=>[(0,l.bF)(d,{"show-password":"",modelValue:r.loginParams.mfaCode,"onUpdate:modelValue":a[2]||(a[2]=e=>r.loginParams.mfaCode=e),placeholder:"请输入MFA验证码",clearable:""},null,8,["modelValue"])])),_:1})):(0,l.Q3)("",!0),(0,l.bF)(u,{style:{"text-align":"center"},class:"login-button-container"},{default:(0,l.k6)((()=>[(0,l.bF)(c,{type:"primary",onClick:i.login,loading:r.loading,class:"login-button"},{default:(0,l.k6)((()=>a[3]||(a[3]=[(0,l.eW)("Login")]))),_:1},8,["onClick","loading"])])),_:1})])),_:1},8,["onSubmit","onKeydown"])])),_:1}),(0,l.bF)(b,{class:"login-footer"},{default:(0,l.k6)((()=>[(0,l.bF)(h,{href:"https://github.com/Yohann0617",target:"_blank"},{default:(0,l.k6)((()=>a[5]||(a[5]=[(0,l.eW)("© Yohann All Rights Reserved")]))),_:1})])),_:1})])}o(4114);var r=o(1219),i={data(){return{loginParams:{account:"",password:"",mfaCode:null},loading:!1,enableMfa:!1}},mounted(){this.getEnableMfa()},methods:{getEnableMfa(){this.$axios.post("/sys/getEnableMfa",{}).then((e=>{e.data.success?this.enableMfa=e.data.data:(0,r.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)}))},async login(){if("yohann"!==this.loginParams.account||"yohann"!==this.loginParams.password){this.loading=!0;try{const e=await this.$axios.post("/sys/login",{...this.loginParams});e.data.success?((0,r.nk)({message:e.data.msg,type:"success",duration:2e3}),sessionStorage.setItem("token",e.data.data),setTimeout((()=>{this.$router.push("/dashboard")}),2e3)):((0,r.nk)({message:e.data.msg,type:"error",duration:2e3}),this.loading=!1)}catch(e){console.error("Error:",e),(0,r.nk)({message:"登录失败，请重试",type:"error",duration:2e3}),this.loading=!1}}else(0,r.nk)({message:"该账号为默认账号，请修改并重启后再尝试登录",type:"error",duration:2e3})}}},d=o(1241);const u=(0,d.A)(i,[["render",s],["__scopeId","data-v-138e6dc6"]]);var c=u}}]);
//# sourceMappingURL=371.d29c31a9.js.map