"use strict";(self["webpackChunkoci_help_web"]=self["webpackChunkoci_help_web"]||[]).push([[744],{5744:function(e,t,a){a.r(t),a.d(t,{default:function(){return K}});var i=a(6768);const n={class:"tab-content"},s={key:0},l={key:1};function o(e,t,a,o,d,c){const r=(0,i.g2)("Cpu"),u=(0,i.g2)("el-icon"),p=(0,i.g2)("el-tab-pane"),m=(0,i.g2)("Box"),g=(0,i.g2)("OciInstanceInfo"),h=(0,i.g2)("BootVolumeList"),f=(0,i.g2)("el-tabs");return(0,i.uX)(),(0,i.Wv)(f,{type:"border-card",class:"demo-tabs",modelValue:d.activeTab,"onUpdate:modelValue":t[0]||(t[0]=e=>d.activeTab=e)},{default:(0,i.k6)((()=>[(0,i.bF)(p,{label:"OciInstanceInfo",name:"OciInstanceInfo"},{label:(0,i.k6)((()=>[(0,i.Lk)("span",null,[(0,i.bF)(u,null,{default:(0,i.k6)((()=>[(0,i.bF)(r)])),_:1}),t[1]||(t[1]=(0,i.Lk)("span",{style:{"margin-left":"5px"}},"实例详情",-1))])])),_:1}),(0,i.bF)(p,{label:"BootVolumeList",name:"BootVolumeList"},{label:(0,i.k6)((()=>[(0,i.Lk)("span",null,[(0,i.bF)(u,null,{default:(0,i.k6)((()=>[(0,i.bF)(m)])),_:1}),t[2]||(t[2]=(0,i.Lk)("span",{style:{"margin-left":"5px"}},"引导卷列表",-1))])])),_:1}),(0,i.Lk)("div",n,["OciInstanceInfo"===d.activeTab?((0,i.uX)(),(0,i.CE)("div",s,[(0,i.bF)(g,{"cfg-id":d.cfgId,username:d.username},null,8,["cfg-id","username"])])):(0,i.Q3)("",!0),"BootVolumeList"===d.activeTab?((0,i.uX)(),(0,i.CE)("div",l,[(0,i.bF)(h,{"cfg-id":d.cfgId,username:d.username},null,8,["cfg-id","username"])])):(0,i.Q3)("",!0)])])),_:1},8,["modelValue"])}var d=a(4232),c=a(5130);const r={style:{display:"flex","justify-content":"flex-start","align-items":"center","margin-bottom":"20px"}},u={style:{"font-size":"16px","font-weight":"bold","margin-left":"20px"}},p={class:"demo-collapse"},m={style:{"margin-left":"20px"}},g={style:{"margin-left":"20px"}},h={style:{"margin-left":"20px"}},f={style:{"margin-left":"20px"}},b={style:{"margin-left":"20px"}},k={class:"instance-list"},y={class:"header"},I={style:{"line-height":"1"}},C={style:{display:"flex","align-items":"center",margin:"10px"}},V={style:{display:"flex","align-items":"center",margin:"10px"}},v={style:{display:"flex","align-items":"center",margin:"10px"}},L={style:{display:"flex","align-items":"center",margin:"10px"}},_={style:{display:"flex","flex-wrap":"wrap",gap:"10px"}},F={style:{display:"flex","align-items":"center",margin:"10px"}},x={style:{display:"flex","align-items":"center",margin:"10px"}},P={style:{display:"flex","align-items":"center",margin:"10px"}};function B(e,t,a,n,s,l){const o=(0,i.g2)("el-button"),B=(0,i.g2)("el-divider"),w=(0,i.g2)("info-filled"),S=(0,i.g2)("el-icon"),D=(0,i.g2)("el-text"),W=(0,i.g2)("el-collapse-item"),T=(0,i.g2)("el-collapse"),U=(0,i.g2)("cpu"),O=(0,i.g2)("el-tag"),R=(0,i.g2)("el-tooltip"),$=(0,i.g2)("el-button-group"),E=(0,i.g2)("el-input"),z=(0,i.g2)("el-dialog"),X=(0,i.g2)("el-checkbox"),N=(0,i.g2)("el-col"),G=(0,i.g2)("el-row"),q=(0,i.g2)("el-form-item"),A=(0,i.g2)("el-form");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.Lk)("div",r,[(0,i.Lk)("div",null,[(0,i.bF)(o,{onClick:l.goBack},{default:(0,i.k6)((()=>t[9]||(t[9]=[(0,i.eW)("返回配置列表")]))),_:1},8,["onClick"]),(0,i.bF)(o,{onClick:l.reLaunchDetails,loading:s.flushLoading,style:{"margin-left":"10px"}},{default:(0,i.k6)((()=>t[10]||(t[10]=[(0,i.eW)("刷新页面")]))),_:1},8,["onClick","loading"])]),(0,i.Lk)("span",u,"当前配置："+(0,d.v_)(this.user.username),1)]),(0,i.bF)(B,{class:"divider"}),(0,i.Lk)("div",p,[(0,i.bF)(T,{accordion:""},{default:(0,i.k6)((()=>[(0,i.bF)(W,{name:"1"},{title:(0,i.k6)((()=>[(0,i.bF)(S,{class:"header-icon"},{default:(0,i.k6)((()=>[(0,i.bF)(w)])),_:1}),t[11]||(t[11]=(0,i.eW)(" API配置详情（点击向下⬇展开） "))])),default:(0,i.k6)((()=>[(0,i.Lk)("div",null,[(0,i.Lk)("span",m,[(0,i.bF)(D,{type:"info"},{default:(0,i.k6)((()=>[(0,i.eW)("region="+(0,d.v_)(this.ociCfgDetails.region),1)])),_:1})])]),(0,i.Lk)("div",null,[(0,i.Lk)("span",g,[(0,i.bF)(D,{type:"info"},{default:(0,i.k6)((()=>[(0,i.eW)("user="+(0,d.v_)(this.ociCfgDetails.userId),1)])),_:1})])]),(0,i.Lk)("div",null,[(0,i.Lk)("span",h,[(0,i.bF)(D,{type:"info"},{default:(0,i.k6)((()=>[(0,i.eW)("tenancy="+(0,d.v_)(this.ociCfgDetails.tenantId),1)])),_:1})])]),(0,i.Lk)("div",null,[(0,i.Lk)("span",f,[(0,i.bF)(D,{type:"info"},{default:(0,i.k6)((()=>[(0,i.eW)("fingerprint="+(0,d.v_)(this.ociCfgDetails.fingerprint),1)])),_:1})])]),(0,i.Lk)("div",null,[(0,i.Lk)("span",b,[(0,i.bF)(D,{type:"info"},{default:(0,i.k6)((()=>[(0,i.eW)("key_file="+(0,d.v_)(this.ociCfgDetails.privateKeyPath),1)])),_:1})])])])),_:1})])),_:1})]),(0,i.Lk)("div",k,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.ociCfgDetails.instanceList,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.ocId,class:"instance-card"},[(0,i.Lk)("div",y,[(0,i.bF)(S,{class:"server-icon"},{default:(0,i.k6)((()=>[(0,i.bF)(U)])),_:1}),(0,i.Lk)("h3",null,(0,d.v_)(e.name),1)]),(0,i.bF)(B,{class:"divider"}),(0,i.Lk)("div",I,[(0,i.Lk)("p",C,[t[12]||(t[12]=(0,i.Lk)("strong",{style:{"min-width":"100px"}},"Region",-1)),(0,i.bF)(O,null,{default:(0,i.k6)((()=>[(0,i.eW)((0,d.v_)(e.region),1)])),_:2},1024)]),(0,i.Lk)("p",V,[t[13]||(t[13]=(0,i.Lk)("strong",{style:{"min-width":"100px"}},"状态",-1)),(0,i.bF)(O,{type:-1!==e.state.indexOf("RUNNING")?"success":"info"},{default:(0,i.k6)((()=>[(0,i.eW)((0,d.v_)(e.state),1)])),_:2},1032,["type"])]),(0,i.Lk)("p",v,[t[14]||(t[14]=(0,i.Lk)("strong",{style:{"min-width":"100px"}},"Shape",-1)),(0,i.bF)(O,{type:-1!==e.shape.indexOf("A1")?"success":"info"},{default:(0,i.k6)((()=>[(0,i.eW)((0,d.v_)(e.shape),1)])),_:2},1032,["type"])]),(0,i.Lk)("div",L,[t[15]||(t[15]=(0,i.Lk)("strong",{style:{"min-width":"100px"}},"公网IP",-1)),(0,i.Lk)("div",_,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.publicIp,((e,t)=>((0,i.uX)(),(0,i.Wv)(O,{key:t,effect:"plain"},{default:(0,i.k6)((()=>[(0,i.eW)((0,d.v_)(e),1)])),_:2},1024)))),128))])]),(0,i.Lk)("p",F,[t[16]||(t[16]=(0,i.Lk)("strong",{style:{"min-width":"100px"}},"配置",-1)),(0,i.bF)(O,{effect:"plain",type:"info"},{default:(0,i.k6)((()=>[(0,i.eW)((0,d.v_)(e.ocpus)+" 核 / "+(0,d.v_)(e.memory)+" GB / "+(0,d.v_)(e.bootVolumeSize)+" GB ",1)])),_:2},1024)]),(0,i.Lk)("p",x,[t[17]||(t[17]=(0,i.Lk)("strong",{style:{"min-width":"100px"}},"可用域",-1)),(0,i.bF)(O,{effect:"plain",type:"info"},{default:(0,i.k6)((()=>[(0,i.eW)((0,d.v_)(e.availabilityDomain),1)])),_:2},1024)]),(0,i.Lk)("p",P,[t[18]||(t[18]=(0,i.Lk)("strong",{style:{"min-width":"100px"}},"创建时间",-1)),(0,i.bF)(O,{effect:"plain",type:"info"},{default:(0,i.k6)((()=>[(0,i.eW)((0,d.v_)(e.createTime),1)])),_:2},1024)])]),(0,i.bF)(B,{class:"divider"}),(0,i.bF)($,{class:"ml-4"},{default:(0,i.k6)((()=>[(0,i.bF)(R,{content:"更换IP",placement:"bottom"},{default:(0,i.k6)((()=>[1!==e.enableChangeIp?((0,i.uX)(),(0,i.Wv)(o,{key:0,onClick:t=>l.handleChangeIp(e.ocId),icon:"HelpFilled"},null,8,["onClick"])):(0,i.Q3)("",!0)])),_:2},1024),(0,i.bF)(R,{content:"停止更换IP",placement:"bottom"},{default:(0,i.k6)((()=>[1===e.enableChangeIp?((0,i.uX)(),(0,i.Wv)(o,{key:0,onClick:t=>l.handleStopChangeIp(e.ocId),icon:"HelpFilled",type:"danger"},null,8,["onClick"])):(0,i.Q3)("",!0)])),_:2},1024),(0,i.bF)(R,{content:"编辑实例配置",placement:"bottom"},{default:(0,i.k6)((()=>[(0,i.bF)(o,{onClick:t=>l.handleUpdateInstanceCfg(e.ocId),icon:"Edit",type:"primary"},null,8,["onClick"])])),_:2},1024),(0,i.bF)(R,{content:"启动实例",placement:"bottom"},{default:(0,i.k6)((()=>[-1===e.state.indexOf("RUNNING")?((0,i.uX)(),(0,i.Wv)(o,{key:0,type:"success",icon:"VideoPlay",disabled:-1!==e.state.indexOf("RUNNING"),onClick:t=>l.updateInstanceState(e.ocId,"START")},null,8,["disabled","onClick"])):(0,i.Q3)("",!0)])),_:2},1024),(0,i.bF)(R,{content:"停止实例",placement:"bottom"},{default:(0,i.k6)((()=>[-1===e.state.indexOf("STOPPED")?((0,i.uX)(),(0,i.Wv)(o,{key:0,type:"info",icon:"VideoPause",disabled:-1!==e.state.indexOf("STOPPED"),onClick:t=>l.updateInstanceState(e.ocId,"STOP")},null,8,["disabled","onClick"])):(0,i.Q3)("",!0)])),_:2},1024),(0,i.bF)(R,{content:"重启实例",placement:"bottom"},{default:(0,i.k6)((()=>[(0,i.bF)(o,{type:"warning",icon:"Refresh",onClick:t=>l.updateInstanceState(e.ocId,"RESET")},null,8,["onClick"])])),_:2},1024),(0,i.bF)(R,{content:"终止实例（操作不可逆，请谨慎操作）",placement:"bottom"},{default:(0,i.k6)((()=>[(0,i.bF)(o,{type:"danger",icon:"Delete",disabled:-1!==e.state.indexOf("TERMINATING"),onClick:t=>l.handleTerminateInstance(e.ocId)},null,8,["disabled","onClick"])])),_:2},1024)])),_:2},1024)])))),128))]),(0,i.bF)(z,{modelValue:s.dialogVisible,"onUpdate:modelValue":t[2]||(t[2]=e=>s.dialogVisible=e),title:"可指定多个 CIDR 网段，回车保存，传空则随机更换一个IP",width:"40%",onClose:t[3]||(t[3]=e=>s.dialogVisible=!1)},{footer:(0,i.k6)((()=>[(0,i.bF)(o,{onClick:t[1]||(t[1]=e=>s.dialogVisible=!1)},{default:(0,i.k6)((()=>t[20]||(t[20]=[(0,i.eW)("取消")]))),_:1}),(0,i.bF)(o,{type:"primary",onClick:l.changeIp,loading:s.changeIpLoading},{default:(0,i.k6)((()=>t[21]||(t[21]=[(0,i.eW)("新增更换IP任务")]))),_:1},8,["onClick","loading"])])),default:(0,i.k6)((()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.changeIpParams.cidrList,(e=>((0,i.uX)(),(0,i.Wv)(O,{key:e,closable:"",onClose:t=>l.handleClose(e)},{default:(0,i.k6)((()=>[(0,i.eW)((0,d.v_)(e),1)])),_:2},1032,["onClose"])))),128)),s.inputVisible?((0,i.uX)(),(0,i.Wv)(E,{key:0,ref:"InputRef",modelValue:s.inputValue,"onUpdate:modelValue":t[0]||(t[0]=e=>s.inputValue=e),class:"w-20",onKeyup:(0,c.jR)(l.handleInputConfirm,["enter"]),onBlur:l.handleInputConfirm},null,8,["modelValue","onKeyup","onBlur"])):((0,i.uX)(),(0,i.Wv)(o,{key:1,class:"button-new-tag",size:"small",onClick:l.showInput},{default:(0,i.k6)((()=>t[19]||(t[19]=[(0,i.eW)(" + New CIDR")]))),_:1},8,["onClick"]))])),_:1},8,["modelValue"]),(0,i.bF)(z,{title:"终止实例",modelValue:s.terminateDialogVisible,"onUpdate:modelValue":t[7]||(t[7]=e=>s.terminateDialogVisible=e),width:"500px",onClose:t[8]||(t[8]=e=>s.terminateDialogVisible=!1)},{footer:(0,i.k6)((()=>[(0,i.bF)(o,{onClick:t[6]||(t[6]=e=>s.terminateDialogVisible=!1)},{default:(0,i.k6)((()=>t[24]||(t[24]=[(0,i.eW)("取消")]))),_:1}),(0,i.bF)(o,{onClick:l.sendCaptcha,loading:s.sendLoading},{default:(0,i.k6)((()=>t[25]||(t[25]=[(0,i.eW)("发送验证码")]))),_:1},8,["onClick","loading"]),(0,i.bF)(o,{type:"danger",disabled:""===s.form.verificationCode,loading:s.terminateLoading,onClick:l.terminateInstance},{default:(0,i.k6)((()=>t[26]||(t[26]=[(0,i.eW)(" 确认终止 ")]))),_:1},8,["disabled","loading","onClick"])])),default:(0,i.k6)((()=>[(0,i.Lk)("div",null,[t[23]||(t[23]=(0,i.Lk)("p",null,"终止实例将不可恢复，请确认以下选项：",-1)),(0,i.bF)(G,null,{default:(0,i.k6)((()=>[(0,i.bF)(N,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(X,{modelValue:s.retainBootVolume,"onUpdate:modelValue":t[4]||(t[4]=e=>s.retainBootVolume=e)},{default:(0,i.k6)((()=>t[22]||(t[22]=[(0,i.eW)(" 保留引导卷及数据 ")]))),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,i.bF)(B,{class:"divider"}),(0,i.bF)(G,null,{default:(0,i.k6)((()=>[(0,i.bF)(N,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(A,{model:s.form,ref:"form","label-width":"70px"},{default:(0,i.k6)((()=>[(0,i.bF)(q,{label:"验证码"},{default:(0,i.k6)((()=>[(0,i.bF)(E,{modelValue:s.form.verificationCode,"onUpdate:modelValue":t[5]||(t[5]=e=>s.form.verificationCode=e),placeholder:"请输入验证码",maxlength:"10",clearable:""},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1})])),_:1})])])),_:1},8,["modelValue"])],64)}a(4114);var w=a(1219),S=a(2933),D=a(7477),W={components:{cpu:D.cpu},data(){return{flushLoading:!1,changeIpLoading:!1,sendLoading:!1,dialogVisible:!1,terminateDialogVisible:!1,terminateLoading:!1,retainBootVolume:!1,form:{verificationCode:""},inputVisible:!1,inputValue:"",user:{},changeIpParams:{ociCfgId:"",instanceId:"",cidrList:[]},ociCfgDetails:{},UpdateInstanceStateParams:{ociCfgId:"",instanceId:"",action:""},SendCaptchaParams:{ociCfgId:"",instanceId:""},TerminateInstanceParams:{ociCfgId:"",instanceId:"",preserveBootVolume:0,captcha:""},GetOciCfgDetailsParams:{cfgId:"",cleanReLaunchDetails:!1}}},mounted(){this.user.id=this.$route.query.cfgId,this.user.username=this.$route.query.username,this.changeIpParams.ociCfgId=this.$route.query.cfgId,this.GetOciCfgDetailsParams.cfgId=this.$route.query.cfgId,this.getOciCfgDetails()},methods:{goBack(){this.$router.back()},handleClose(e){const t=this.changeIpParams.cidrList.indexOf(e);-1!==t&&this.changeIpParams.cidrList.splice(t,1)},handleStopChangeIp(e){const t=window.confirm("确定要停止更换IP任务吗?");t?this.stopChangeIp(e):this.$message.info("已取消")},handleUpdateInstanceCfg(e){this.$router.push({path:"/dashboard/ociUpdateInstanceCfg",query:{ocId:e,ociCfgId:this.user.id,username:this.user.username}})},stopChangeIp(e){this.$axios.post("/oci/stopChangeIp",{instanceId:e}).then((e=>{e.data.success?(0,w.nk)({message:e.data.msg,type:"success",duration:2e3}):(0,w.nk)({message:e.data.msg,type:"error",duration:2e3}),this.getOciCfgDetails()})).catch((e=>{console.error("Error:",e)}))},showInput(){this.inputVisible=!0,this.$nextTick((()=>{this.$refs.InputRef.focus()}))},handleInputConfirm(){this.inputValue&&!this.changeIpParams.cidrList.includes(this.inputValue)&&this.changeIpParams.cidrList.push(this.inputValue),this.inputValue="",this.inputVisible=!1},reLaunchDetails(){this.GetOciCfgDetailsParams.cleanReLaunchDetails=!0,this.getOciCfgDetails(),this.GetOciCfgDetailsParams.cleanReLaunchDetails=!1},async getOciCfgDetails(){this.ociCfgDetails.instanceList=[],this.flushLoading=!0,await this.$axios.post("/oci/details",{cfgId:this.changeIpParams.ociCfgId,cleanReLaunchDetails:this.GetOciCfgDetailsParams.cleanReLaunchDetails}).then((e=>{e.data.success?(this.ociCfgDetails=e.data.data,(0,w.nk)({message:e.data.msg,type:"success",duration:2e3}),this.flushLoading=!1):(0,w.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)}))},handleChangeIp(e){this.dialogVisible=!0,this.changeIpParams.instanceId=e},changeIp(){this.changeIpLoading=!0,this.$axios.post("/oci/changeIp",{...this.changeIpParams}).then((e=>{e.data.success?((0,w.nk)({message:e.data.msg,type:"success",duration:2e3}),this.changeIpLoading=!1,this.dialogVisible=!1,this.getOciCfgDetails()):(0,w.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)}))},async updateInstanceState(e,t){let a="";switch(t){case"START":a="确定要启动实例吗？";break;case"STOP":a="确定要停止实例吗？";break;case"RESET":a="确定要重新启动实例吗？";break;default:a="确定要执行此操作吗？"}try{const i=await S.s.confirm(a,"确认操作",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});"confirm"===i&&(this.UpdateInstanceStateParams.ociCfgId=this.user.id,this.UpdateInstanceStateParams.instanceId=e,this.UpdateInstanceStateParams.action=t,await this.$axios.post("/oci/updateInstanceState",{...this.UpdateInstanceStateParams}).then((e=>{e.data.success?((0,w.nk)({message:e.data.msg,type:"success",duration:2e3}),this.getOciCfgDetails()):(0,w.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e),(0,w.nk)({message:"更新实例状态时出错",type:"error",duration:2e3})})))}catch(i){(0,w.nk)({message:"操作已取消",type:"info",duration:2e3})}},handleTerminateInstance(e){this.TerminateInstanceParams.instanceId=e,this.terminateDialogVisible=!0},sendCaptcha(){this.sendLoading=!0,this.SendCaptchaParams.ociCfgId=this.user.id,this.SendCaptchaParams.instanceId=this.TerminateInstanceParams.instanceId,this.$axios.post("/oci/sendCaptcha",{...this.SendCaptchaParams}).then((e=>{e.data.success?((0,w.nk)({message:e.data.msg,type:"success",duration:2e3}),this.changeIpLoading=!1,this.dialogVisible=!1,this.sendLoading=!1):(0,w.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)}))},async terminateInstance(){this.terminateLoading=!0,this.TerminateInstanceParams.ociCfgId=this.user.id,this.TerminateInstanceParams.preserveBootVolume=!0===this.retainBootVolume?1:0,this.TerminateInstanceParams.captcha=this.form.verificationCode,this.$axios.post("/oci/terminateInstance",{...this.TerminateInstanceParams}).then((e=>{e.data.success?((0,w.nk)({message:e.data.msg,type:"success",duration:2e3}),this.getOciCfgDetails()):(0,w.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e),(0,w.nk)({message:"终止实例时发生错误",type:"error",duration:2e3})})).finally((()=>{this.terminateLoading=!1,this.terminateDialogVisible=!1}))}}},T=a(1241);const U=(0,T.A)(W,[["render",B]]);var O=U;const R={style:{"font-size":"16px","font-weight":"bold"}},$={style:{"overflow-x":"auto"}},E={style:{"margin-left":"10px"}};function z(e,t,a,n,s,l){const o=(0,i.g2)("el-divider"),c=(0,i.g2)("el-button"),r=(0,i.g2)("el-input"),u=(0,i.g2)("el-table-column"),p=(0,i.g2)("el-tooltip"),m=(0,i.g2)("el-tag"),g=(0,i.g2)("el-table"),h=(0,i.g2)("el-pagination"),f=(0,i.g2)("el-input-number"),b=(0,i.g2)("el-col"),k=(0,i.g2)("el-slider"),y=(0,i.g2)("el-row"),I=(0,i.g2)("el-dialog"),C=(0,i.gN)("loading");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.Lk)("span",R,"当前配置："+(0,d.v_)(this.username),1),(0,i.bF)(o,{class:"divider"}),(0,i.Lk)("div",null,[(0,i.bF)(c,{type:"success",style:{"margin-bottom":"20px"},onClick:l.cleanReLaunch},{default:(0,i.k6)((()=>t[8]||(t[8]=[(0,i.eW)(" 刷新 ")]))),_:1},8,["onClick"]),(0,i.bF)(r,{modelValue:s.pageParams.keyword,"onUpdate:modelValue":t[0]||(t[0]=e=>s.pageParams.keyword=e),placeholder:"模糊搜索",onInput:l.getBvList,clearable:"","prefix-icon":"Search",style:{"margin-left":"20px",width:"200px","margin-bottom":"20px"}},null,8,["modelValue","onInput"]),(0,i.bF)(c,{type:"danger",onClick:l.batchTerminate,disabled:!s.batchSelected.length,style:{"margin-left":"20px","margin-bottom":"20px"}},{default:(0,i.k6)((()=>t[9]||(t[9]=[(0,i.eW)(" 批量终止 ")]))),_:1},8,["onClick","disabled"]),(0,i.Lk)("div",$,[(0,i.bo)(((0,i.uX)(),(0,i.Wv)(g,{data:s.BootVolumesRsp,style:{width:"100%","min-width":"800px"},onSelectionChange:l.handleSelectionChange},{default:(0,i.k6)((()=>[(0,i.bF)(u,{type:"selection",width:"35",selectable:l.isSelectable},null,8,["selectable"]),(0,i.bF)(u,{fixed:"",label:"名称",width:"300"},{default:(0,i.k6)((({row:e})=>[(0,i.bF)(p,{content:e.displayName,placement:"top"},{default:(0,i.k6)((()=>[(0,i.eW)((0,d.v_)(e.displayName),1)])),_:2},1032,["content"])])),_:1}),(0,i.bF)(u,{label:"可用域"},{default:(0,i.k6)((({row:e})=>[(0,i.bF)(p,{content:e.availabilityDomain,placement:"top"},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"info"},{default:(0,i.k6)((()=>[(0,i.eW)((0,d.v_)(e.availabilityDomain),1)])),_:2},1024)])),_:2},1032,["content"])])),_:1}),(0,i.bF)(u,{label:"状态"},{default:(0,i.k6)((({row:e})=>[(0,i.bF)(m,{type:"AVAILABLE"===e.lifecycleState?"success":"info"},{default:(0,i.k6)((()=>[(0,i.eW)((0,d.v_)(e.lifecycleState),1)])),_:2},1032,["type"])])),_:1}),(0,i.bF)(u,{label:"已附加实例"},{default:(0,i.k6)((({row:e})=>[(0,i.bF)(p,{content:e.instanceName,placement:"top"},{default:(0,i.k6)((()=>[null!==e.instanceName?((0,i.uX)(),(0,i.Wv)(m,{key:0,type:"primary"},{default:(0,i.k6)((()=>[(0,i.eW)((0,d.v_)(e.instanceName),1)])),_:2},1024)):(0,i.Q3)("",!0)])),_:2},1032,["content"])])),_:1}),(0,i.bF)(u,{prop:"vpusPerGB",label:"VPU"}),(0,i.bF)(u,{prop:"sizeInGBs",label:"硬盘（GB）"}),(0,i.bF)(u,{prop:"timeCreated",label:"创建时间"}),(0,i.bF)(u,{fixed:"right",label:"操作",width:"150"},{default:(0,i.k6)((({row:e})=>[(0,i.bF)(c,{onClick:t=>l.handleUpdateBootVolume(e),type:"primary",link:""},{default:(0,i.k6)((()=>t[10]||(t[10]=[(0,i.eW)(" 编辑 ")]))),_:2},1032,["onClick"]),(0,i.bF)(c,{onClick:t=>l.handleTerminate(e),type:"danger",link:"",disabled:e.attached},{default:(0,i.k6)((()=>t[11]||(t[11]=[(0,i.eW)(" 终止 ")]))),_:2},1032,["onClick","disabled"])])),_:1})])),_:1},8,["data","onSelectionChange"])),[[C,s.loading]])]),(0,i.bF)(h,{onCurrentChange:l.handlePageChange,onSizeChange:l.handleSizeChange,"current-page":s.pageParams.currentPage,"onUpdate:currentPage":t[1]||(t[1]=e=>s.pageParams.currentPage=e),"page-size":s.pageParams.pageSize,"onUpdate:pageSize":t[2]||(t[2]=e=>s.pageParams.pageSize=e),"page-sizes":[5,10,20,50],total:s.total,layout:"total, sizes, prev, pager, next, jumper",style:{"margin-top":"20px"}},null,8,["onCurrentChange","onSizeChange","current-page","page-size","total"])]),(0,i.bF)(I,{title:"更改引导卷配置",modelValue:s.updateBvDialogVisible,"onUpdate:modelValue":t[6]||(t[6]=e=>s.updateBvDialogVisible=e),width:"500px",onClose:t[7]||(t[7]=e=>s.updateBvDialogVisible=!1)},{footer:(0,i.k6)((()=>[(0,i.bF)(y,{type:"flex",justify:"end",style:{"margin-top":"20px"}},{default:(0,i.k6)((()=>[(0,i.bF)(c,{onClick:t[5]||(t[5]=e=>s.updateBvDialogVisible=!1)},{default:(0,i.k6)((()=>t[14]||(t[14]=[(0,i.eW)("取消")]))),_:1}),(0,i.bF)(c,{type:"primary",loading:s.updateBvLoading,onClick:l.updateBootVolume},{default:(0,i.k6)((()=>t[15]||(t[15]=[(0,i.eW)(" 确认修改 ")]))),_:1},8,["loading","onClick"])])),_:1})])),default:(0,i.k6)((()=>[(0,i.bF)(y,{gutter:20,align:"middle",style:{"margin-top":"20px"}},{default:(0,i.k6)((()=>[(0,i.bF)(b,{span:24,style:{"margin-bottom":"10px"}},{default:(0,i.k6)((()=>[t[12]||(t[12]=(0,i.Lk)("span",{style:{"font-size":"14px","font-weight":"bold"}},"引导卷磁盘大小（GB）：",-1)),(0,i.bF)(f,{modelValue:s.UpdateBootVolumeParams.bootVolumeSize,"onUpdate:modelValue":t[3]||(t[3]=e=>s.UpdateBootVolumeParams.bootVolumeSize=e),min:47,label:"引导卷大小",style:{"margin-left":"10px"}},null,8,["modelValue"])])),_:1}),(0,i.bF)(b,{span:24},{default:(0,i.k6)((()=>[t[13]||(t[13]=(0,i.Lk)("span",{style:{"font-size":"14px","font-weight":"bold"}},"引导卷 VPU：",-1)),(0,i.bF)(k,{modelValue:s.UpdateBootVolumeParams.bootVolumeVpu,"onUpdate:modelValue":t[4]||(t[4]=e=>s.UpdateBootVolumeParams.bootVolumeVpu=e),min:10,max:120,step:10,label:"引导卷VPU大小",style:{"margin-left":"10px","max-width":"70%"}},null,8,["modelValue"]),(0,i.Lk)("span",E,"当前 VPU: "+(0,d.v_)(s.selectedBvVpu),1)])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}a(1454);var X={mounted(){this.pageParams.ociCfgId=this.$route.query.cfgId,this.TerminateBootVolumeParams.ociCfgId=this.$route.query.cfgId,this.UpdateBootVolumeParams.ociCfgId=this.$route.query.cfgId,this.username=this.$route.query.username,this.getBvList()},data(){return{username:"",pageParams:{cleanReLaunch:!1,ociCfgId:"",keyword:"",currentPage:1,pageSize:5},total:0,BootVolumesRsp:[],batchSelected:[],TerminateBootVolumeParams:{ociCfgId:"",bootVolumeIds:[]},loading:!0,updateBvDialogVisible:!1,updateBvLoading:!1,selectedBvVpu:"",UpdateBootVolumeParams:{ociCfgId:"",bootVolumeId:"",bootVolumeSize:"",bootVolumeVpu:""}}},methods:{async getBvList(){await this.$axios.post("/bootVolume/page",{...this.pageParams}).then((e=>{e.data.success?(this.BootVolumesRsp=e.data.data.records,this.total=e.data.data.total):(0,w.nk)({message:e.data.msg,type:"error",duration:2e3}),this.loading=!1})).catch((e=>{console.error("Error:",e)}))},cleanReLaunch(){this.pageParams.cleanReLaunch=!0,this.loading=!0,this.getBvList(),this.pageParams.cleanReLaunch=!1},async batchTerminate(){const e=window.confirm("确定要终止引导卷吗");e?(this.TerminateBootVolumeParams.bootVolumeIds=this.batchSelected.map((e=>e.id)),await this.$axios.post("/bootVolume/terminate",{...this.TerminateBootVolumeParams}).then((e=>{e.data.success?((0,w.nk)({message:e.data.msg,type:"success",duration:2e3}),this.cleanReLaunch()):(0,w.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)}))):this.$message.info("已取消")},handleTerminate(e){const t=window.confirm("确定要终止引导卷吗");t?(this.TerminateBootVolumeParams.bootVolumeIds.push(e.id),this.batchTerminate()):this.$message.info("已取消")},handleUpdateBootVolume(e){this.updateBvDialogVisible=!0,this.UpdateBootVolumeParams.bootVolumeId=e.id,this.UpdateBootVolumeParams.bootVolumeSize=e.sizeInGBs,this.selectedBvVpu=e.vpusPerGB},async updateBootVolume(){const e=window.confirm("确定要更改引导卷配置吗");if(!e)return this.$message.info("已取消"),void(this.updateBvDialogVisible=!1);this.updateBvLoading=!0,await this.$axios.post("/bootVolume/update",{...this.UpdateBootVolumeParams}).then((e=>{e.data.success?((0,w.nk)({message:e.data.msg,type:"success",duration:2e3}),this.cleanReLaunch()):(0,w.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)})).finally((()=>{this.updateBvLoading=!1,this.updateBvDialogVisible=!1}))},isSelectable(e){return!e.attached},handlePageChange(e){this.pageParams.currentPage=e,this.getBvList()},handleSizeChange(e){this.pageParams.currentPage=1,this.pageParams.pageSize=e,this.getBvList()},handleSelectionChange(e){this.batchSelected=e}}};const N=(0,T.A)(X,[["render",z]]);var G=N,q={mounted(){this.cfgId=this.$route.query.cfgId,this.username=this.$route.query.username},data(){return{activeTab:"OciInstanceInfo",cfgId:"",username:""}},methods:{handleTabClick(e){console.log(`Switched to tab: ${e.name}`)}},components:{OciInstanceInfo:O,BootVolumeList:G}};const A=(0,T.A)(q,[["render",o]]);var K=A}}]);
//# sourceMappingURL=744.3d5ed331.js.map