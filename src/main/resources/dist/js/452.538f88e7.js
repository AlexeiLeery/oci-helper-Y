"use strict";(self["webpackChunkoci_help_web"]=self["webpackChunkoci_help_web"]||[]).push([[452],{452:function(e,a,t){t.r(a),t.d(a,{default:function(){return i}});var s=t(6768);const l={key:0,class:"image-preview"};function d(e,a,t,d,o,n){const r=(0,s.g2)("el-text"),g=(0,s.g2)("el-input"),i=(0,s.g2)("el-form-item"),m=(0,s.g2)("el-form"),u=(0,s.g2)("el-switch"),c=(0,s.g2)("el-image"),p=(0,s.g2)("el-button"),f=(0,s.g2)("el-aside"),y=(0,s.g2)("el-main"),x=(0,s.g2)("el-container");return(0,s.uX)(),(0,s.Wv)(x,{style:{height:"100vh"}},{default:(0,s.k6)((()=>[(0,s.bF)(f,{width:"700px",class:"left-panel"},{default:(0,s.k6)((()=>[(0,s.bF)(m,null,{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"mx-1",size:"large"},{default:(0,s.k6)((()=>a[7]||(a[7]=[(0,s.eW)("telegram机器人Token")]))),_:1}),(0,s.bF)(i,{style:{"margin-top":"10px"}},{default:(0,s.k6)((()=>[(0,s.bF)(g,{modelValue:o.UpdateSysCfgParams.tgBotToken,"onUpdate:modelValue":a[0]||(a[0]=e=>o.UpdateSysCfgParams.tgBotToken=e),placeholder:"12345678:AAGC8NFfxxxx",clearable:""},null,8,["modelValue"])])),_:1}),(0,s.bF)(r,{class:"mx-1",size:"large"},{default:(0,s.k6)((()=>a[8]||(a[8]=[(0,s.eW)("telegram个人ID")]))),_:1}),(0,s.bF)(i,{style:{"margin-top":"10px"}},{default:(0,s.k6)((()=>[(0,s.bF)(g,{modelValue:o.UpdateSysCfgParams.tgChatId,"onUpdate:modelValue":a[1]||(a[1]=e=>o.UpdateSysCfgParams.tgChatId=e),placeholder:"61945xxxxx",clearable:""},null,8,["modelValue"])])),_:1}),(0,s.bF)(r,{class:"mx-1",size:"large"},{default:(0,s.k6)((()=>a[9]||(a[9]=[(0,s.eW)("钉钉access_token")]))),_:1}),(0,s.bF)(i,{style:{"margin-top":"10px"}},{default:(0,s.k6)((()=>[(0,s.bF)(g,{modelValue:o.UpdateSysCfgParams.dingToken,"onUpdate:modelValue":a[2]||(a[2]=e=>o.UpdateSysCfgParams.dingToken=e),placeholder:"0b0bf9f89xxxx",clearable:""},null,8,["modelValue"])])),_:1}),(0,s.bF)(r,{class:"mx-1",size:"large"},{default:(0,s.k6)((()=>a[10]||(a[10]=[(0,s.eW)("钉钉secret")]))),_:1}),(0,s.bF)(i,{style:{"margin-top":"10px"}},{default:(0,s.k6)((()=>[(0,s.bF)(g,{modelValue:o.UpdateSysCfgParams.dingSecret,"onUpdate:modelValue":a[3]||(a[3]=e=>o.UpdateSysCfgParams.dingSecret=e),placeholder:"SEC1ebxxxx",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),(0,s.bF)(m,null,{default:(0,s.k6)((()=>[(0,s.bF)(i,{label:"是否启用谷歌MFA：",style:{"margin-top":"10px"}},{default:(0,s.k6)((()=>[(0,s.bF)(u,{modelValue:o.UpdateSysCfgParams.enableMfa,"onUpdate:modelValue":a[4]||(a[4]=e=>o.UpdateSysCfgParams.enableMfa=e),"active-text":"启用","inactive-text":"禁用"},null,8,["modelValue"])])),_:1}),(0,s.bF)(r,{class:"mx-1"},{default:(0,s.k6)((()=>a[11]||(a[11]=[(0,s.eW)("⭐PS：如果禁用后重新启用，需要在谷歌MFA上删除旧的验证码，重新扫码绑定谷歌MFA❗❗❗")]))),_:1}),o.UpdateSysCfgParams.enableMfa?((0,s.uX)(),(0,s.CE)("div",l,[(0,s.bF)(c,{style:{"margin-top":"20px",width:"300px",height:"300px"},src:o.UpdateSysCfgParams.mfaQrData,fit:"contain"},null,8,["src"]),(0,s.bF)(g,{modelValue:o.UpdateSysCfgParams.mfaSecret,"onUpdate:modelValue":a[5]||(a[5]=e=>o.UpdateSysCfgParams.mfaSecret=e),style:{"margin-top":"10px",width:"400px"},disabled:"",placeholder:"",label:"xxxx"},null,8,["modelValue"])])):(0,s.Q3)("",!0)])),_:1}),(0,s.bF)(p,{type:"primary",style:{"margin-top":"10px"},onClick:n.updateSysCfg,loading:o.cfgLoading},{default:(0,s.k6)((()=>a[12]||(a[12]=[(0,s.eW)(" 更新配置 ")]))),_:1},8,["onClick","loading"])])),_:1}),(0,s.bF)(y,{class:"right-panel"},{default:(0,s.k6)((()=>[(0,s.bF)(g,{type:"textarea",modelValue:o.message,"onUpdate:modelValue":a[6]||(a[6]=e=>o.message=e),placeholder:"输入测试文本",rows:20},null,8,["modelValue"]),(0,s.bF)(p,{type:"primary",onClick:n.sendMsg,loading:o.sendLoading},{default:(0,s.k6)((()=>a[13]||(a[13]=[(0,s.eW)("测试消息发送")]))),_:1},8,["onClick","loading"])])),_:1})])),_:1})}var o=t(1219),n={data(){return{cfgLoading:!1,sendLoading:!1,UpdateSysCfgParams:{dingToken:"",dingSecret:"",tgChatId:"",tgBotToken:"",enableMfa:"",mfaSecret:"",mfaQrData:""},message:""}},mounted(){this.getSysCfg()},methods:{async getSysCfg(){await this.$axios.post("/sys/getSysCfg",{}).then((e=>{e.data.success?this.UpdateSysCfgParams=e.data.data:(0,o.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)}))},async updateSysCfg(){this.cfgLoading=!0,await this.$axios.post("/sys/updateSysCfg",{...this.UpdateSysCfgParams}).then((e=>{e.data.success?((0,o.nk)({message:e.data.msg,type:"success",duration:2e3}),this.cfgLoading=!1,this.getSysCfg()):(0,o.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)}))},async sendMsg(){this.sendLoading=!0,await this.$axios.post("/sys/sendMsg",{message:this.message}).then((e=>{e.data.success?((0,o.nk)({message:e.data.msg,type:"success",duration:2e3}),this.sendLoading=!1):(0,o.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)}))}}},r=t(1241);const g=(0,r.A)(n,[["render",d],["__scopeId","data-v-65231ee3"]]);var i=g}}]);
//# sourceMappingURL=452.538f88e7.js.map